
/**
 * The code below uses open source software. Please visit the URL below for an overview of the licenses:
 * http://js.api.here.com/v3/3.1.36.0/HERE_NOTICE
 */

H.util.eval("S.prototype.s=da(3,function(a){var b=this.getCache(),c=this;if(a!==y){C(a,Pk,S.prototype.s,0);var d=a}else d=wl;d!==b&&b.ma(function(e,f,g){return c.Sb(e)?(d.add(e,f,g),!0):!1});this.S=d});qi.prototype.b=da(2,function(a){this.g=a;a=this.getState();a!==Uh.INIT&&a!==Uh.LOADING&&xi(this)});function qp(a,b){Ya.apply(null,arguments);return a}function rp(a,b){var c=x.console;c&&c.warn&&(a=xc(a)+\" is deprecated and will be removed soon. \",b&&(a+=b),c.warn(a))}var sp=globalThis;tc(\"monospace serif\");\nfunction tp(){}tp.prototype.pop=function(a){this[a]||(this[a]=[]);return this[a].pop()||document.createElement(\"canvas\")};tp.prototype.push=function(a,b){this[b]||(this[b]=[]);this[b].push(a)};var up=new tp;t(\"H.service.util.eval\",function(a){return eval(a)});function V(a,b,c,d,e,f){if(a&&b)this.ri(a),this.Xe(b),this.td(c),this.mi(e),this.Lk(f),this.kg(d);else throw new D(V,B,'Parameters \"scheme\" and \"host\" must be specified');}t(\"H.service.Url\",V);\nfunction vp(a,b){var c=x.document,d;var e=\"\";if(c){e=c.createElement(\"a\");if(b){var f=(d=c.getElementsByTagName(\"base\")[0])&&d.href;var g=c.head;var h=d||g.appendChild(c.createElement(\"base\"));h.href=b}e.href=a;e=e.href;b&&(d?d.href=f:g.removeChild(h))}else/[\\w]+:\\/\\//.test(a)&&(e=a);f=/(?:(\\w+):\\/\\/)?(?:([^:]+):([^@/]*)@)?([^/:]+)?(?:[:]{1}([0-9]+))?(\\/[^?#]*)?(\\?[^#]+)?(#.*)?/.exec(e);a=f[1];g=f[4];b=f[5];h=f[6];c=f[7];d=f[8];!f[2]&&g&&/@/.test(g)&&(g=g.split(\"@\")[1]);f=V;h=h&&0<h.length?h.substr(1):\n\"\";e={};var k,l;if(c)for(k=/([?&]?([^=&+]+))(=([^&]+))?/g;l=k.exec(c);)e[decodeURIComponent(l[2])]=l[4]?decodeURIComponent(l[4]):void 0;return new f(a,g,h,e,isNaN(+b)?void 0:+b,d&&0<d.length?d.substr(1):\"\")}V.parse=vp;V.prototype.clone=function(){var a={},b;for(b in this.a)a[b]=this.a[b];return new V(this.i,this.g,this.b,a,this.f,this.c)};V.prototype.clone=V.prototype.clone;\nV.prototype.ri=function(a){if(!a||\"string\"!==typeof a)throw new D(this.ri,0,'The \"scheme\" parameter must be a non-empty string.');this.i=a;return this};V.prototype.setScheme=V.prototype.ri;V.prototype.Nm=function(){return this.i};V.prototype.getScheme=V.prototype.Nm;V.prototype.Xe=function(a){if(!a||\"string\"!==typeof a||\"-\"===a.charAt(0)||\".\"===a.charAt(0)||\".\"===a.charAt(a.length-1))throw new D(this.Xe,0,'The \"host\" parameter is not a valid host name.');this.g=a;return this};\nV.prototype.setHost=V.prototype.Xe;V.prototype.im=function(){return this.g};V.prototype.getHost=V.prototype.im;V.prototype.td=function(a){this.b=a||void 0;return this};V.prototype.setPath=V.prototype.td;V.prototype.Am=function(){return this.b};V.prototype.getPath=V.prototype.Am;V.prototype.kg=function(a){if(a)if(\"object\"==typeof a)this.a=a;else throw new D(this.kg,0,'Parameter \"params\" must be an object.');else this.a={};return this};V.prototype.setQuery=V.prototype.kg;V.prototype.Kj=function(){return!wp(this)};\nV.prototype.hasQuery=V.prototype.Kj;V.prototype.getQuery=function(){return this.a};V.prototype.getQuery=V.prototype.getQuery;V.prototype.mi=function(a){if(void 0===a)this.f=a;else{var b=$d(+a<<0,0,65535);if(b!=a)throw new D(this.mi,0,'Parameter \"port\" must be an integer in range [0...65535]');this.f=b}return this};V.prototype.setPort=V.prototype.mi;V.prototype.Dm=function(){return this.f};V.prototype.getPort=V.prototype.Dm;V.prototype.Lk=function(a){this.c=a||void 0;return this};\nV.prototype.setAnchor=V.prototype.Lk;V.prototype.fd=function(){return this.c};V.prototype.getAnchor=V.prototype.fd;V.prototype.I=function(a){if(\"object\"!==typeof a)throw new D(this.I,0,'Parameter \"other\" must be an object.');var b=this.a,c;for(c in a)a.hasOwnProperty(c)&&\"function\"!==typeof a[c]&&(b[c]=a[c]);return this};V.prototype.mergeQuery=V.prototype.I;\nV.prototype.za=function(a){if(!a||\"string\"!==typeof a)throw new D(this.za,0,'Parameter \"subDomain\" must be a non-empty string');\".\"===a.substr(a.length-1)&&(a=a.substr(0,a.length-1));return this.Xe(a+\".\"+this.g)};V.prototype.addSubDomain=V.prototype.za;V.prototype.F=function(a){if(!a||\"string\"!==typeof a)throw new D(this.F,0,'Parameter \"subPath\" must be a non-empty string');return this.td((this.b?this.b+\"/\":\"\")+a)};V.prototype.addSubPath=V.prototype.F;\nV.prototype.toString=function(){return[this.i+\"://\",this.g,this.f?\":\"+this.f:\"\",this.b||!wp(this)||this.c?\"/\":\"\",this.b?encodeURI(this.b):\"\",xp(this),this.c?\"#\"+encodeURIComponent(this.c):\"\"].join(\"\")};V.prototype.toString=V.prototype.toString;function yp(a){return encodeURIComponent(a).replace(/[!'()*]/g,function(b){return\"%\"+b.charCodeAt(0).toString(16)})}\nfunction xp(a){var b=[],c=a.a,d={},e;for(e in c){if(c.hasOwnProperty(e)&&\"function\"!==typeof c[e]){var f=a.a[e];d.vd=yp(e);C(f,zp)?f.a.forEach(function(g){return function(h){b.push(g.vd+\"=\"+yp(h))}}(d)):C(f,Ap)?b.push(d.vd+\"=\"+f.b.map(function(g){return yp(g)}).join(f.a)):b.push(void 0===f?d.vd:d.vd+\"=\"+yp(f))}d={vd:d.vd}}return 0<b.length?\"?\"+b.join(\"&\"):\"\"}\nfunction Bp(a){var b=If(\"H-service\",\"1.36.0\",\"29236d0\",{region:\"row\"});a.a.xnlp=\"CL_JSMv3.\"+b.version;return a}function wp(a){var b,c=0;for(b in a.a)if(a.a.hasOwnProperty(b)&&\"function\"!==typeof a.a[b]&&(c++,0<c))break;return!c}function Cp(a,b){if(Ac(a))for(var c=0;c<a.length;c++){var d=a[c];if(!Bc(d)&&!Ec(d)){var e=\"The Array does not contain only strings and numbers\";break}}else e=\"Not an Array\";if(e)throw new D(b,0,a);return a}function zp(a){this.a=Cp(a,zp)}\nV.MultiValueQueryParameter=zp;zp.prototype.Ym=function(){return this.a};zp.prototype.getValues=zp.prototype.Ym;function Ap(a,b){this.b=Cp(a,Ap);if(!/^[!\\$\\(\\)\\*\\+,;]$/.test(b))throw new D(Ap,1,'Invalid delimiter \"'+b+'\"');this.a=b}V.DelimitedQuerySubValues=Ap;function W(a){a=qp({},this.c,a);var b=a.apikey||a.apiKey,c=a.baseUrl;if(c=b?c?0:\"baseUrl\":\"apikey\")throw new D(W,0,'\"'+c+'\" must be specified');this.Nk(a.baseUrl);this.b=b;this.a.I({apikey:b});this.f=a.headers||{};this.g=Wa(a.servicesConfig||{})}t(\"H.service.Platform\",W);W.prototype.c={apikey:null,baseUrl:new V(\"https\",\"hereapi\"+(lo?\".cn\":\".com\"))};W.prototype.Nk=function(a){this.a=Bp(a.clone());this.b=a=this.b;this.a.I({apikey:a})};W.prototype.setBaseUrl=W.prototype.Nk;W.prototype.Bb=function(){return this.a};\nW.prototype.getBaseUrl=W.prototype.Bb;W.prototype.Ma=function(a,b){try{return a.Rj=!0,new a(qp({platformBaseUrl:this.Bb(),headers:this.f},this.g[a.CONFIG_KEY]||{},b||{}))}finally{a.Rj=!1}};W.prototype.createService=W.prototype.Ma;W.prototype.qf=function(a,b,c,d,e,f){function g(r,v,w,A,J){return r.ic(v,w,m,A,n,1,J,k)}var h=hk,k={crossOrigin:\"anonymous\"};if(Ea(a)){var l=a;\"crossOrigin\"in l&&(k.crossOrigin=l.crossOrigin);a=l.tileSize;b=l.ppi;c=l.lg;d=l.lg2;e=l.style;f=l.pois;l.engineType&&(h=l.engineType,k.engineType=h)}var m=a||512,n={};if(0>[72,250,320,500].indexOf(+b)){if(b!==B)throw new D(this.qf,1,b);}else n.ppi=+b;c&&(n.lg=c);d&&(n.lg2=d);e&&(n.style=e);f&&(n.pois=!!f);if(h===ik.HARP&&!H.map.render.harp)throw new D(this.qf,\n0,\"HARP engine is not supported, module not found\");a=this.xj();e=h===ik.WEBGL?new qi(to()+\"/omv/miami/normal.day.yaml\"):new H.map.render.harp.Style(to()+\"/harp/oslo/normal.day.json\");b={engineType:h};l&&l.politicalView&&(b.politicalView=l.politicalView);c&&(b.lg=c);d&&(b.lg2=d);f&&(b.pois=f);c=a.cd(e,b);d={};if(lo)qp(d,{vector:{normal:{map:c}}});else{f=this.$g();l=this.$g({type:\"aerial\"});e=this.Dj();var q=h===ik.WEBGL?new qi(to()+\"/omv/miami/truck.day.yaml\"):new H.map.render.harp.Style(to()+\"/harp/oslo/normal.day.json\");\na=a.cd(q,b);b=e.Vi(n.lg?{lg:n.lg,i18n:!0,engineType:h}:{engineType:h});qp(d,{vector:{normal:{map:c,truck:a,traffic:e.Ui(void 0,h),trafficincidents:b}},raster:{normal:{xbase:g(f,\"xbasetile\",\"normal.day\",\"png8\",!1),xbasenight:g(f,\"xbasetile\",\"normal.night\",\"png8\",!0),base:g(f,\"basetile\",\"normal.day\",\"png8\",!1),basenight:g(f,\"basetile\",\"normal.night\",\"png8\",!0),map:g(f,\"maptile\",\"normal.day\",\"png8\",!1),mapnight:g(f,\"maptile\",\"normal.night\",\"png8\",!0),trafficincidents:b,transit:g(f,\"maptile\",\"normal.day.transit\",\n\"png8\",!1),labels:g(f,\"labeltile\",\"normal.day\",\"png\",!1)},satellite:{xbase:g(l,\"xbasetile\",\"hybrid.day\",\"jpg\",!0),base:g(l,\"basetile\",\"hybrid.day\",\"jpg\",!0),map:g(l,\"maptile\",\"hybrid.day\",\"jpg\",!0),labels:g(l,\"labeltile\",\"hybrid.day\",\"png\",!0)},terrain:{xbase:g(l,\"xbasetile\",\"terrain.day\",\"jpg\",!1),base:g(l,\"basetile\",\"terrain.day\",\"jpg\",!1),map:g(l,\"maptile\",\"terrain.day\",\"jpg\",!1),labels:g(l,\"labeltile\",\"terrain.day\",\"png\",!1)}}})}return d};W.prototype.createDefaultLayers=W.prototype.qf;function Dp(a){if(!a||!Da(a.requestData))throw new D(Dp,0,\"options.requestData\");Dp.l.constructor.call(this,a);this.K=a.requestData;this.B=!!a.providesDomMarkers}u(Dp,S);t(\"H.map.provider.MarkerTileProvider\",Dp);Dp.prototype.Gd=function(a){return a?a.length+1:1};Dp.prototype.getEntryWeight=Dp.prototype.Gd;\nDp.prototype.G=function(a,b,c,d,e){var f=this;return this.K(a,b,c,function(g){for(var h=[],k,l,m=g.length;m--;)l=g[m],l.po=f.getTileKey(a,b,c),l.ia(f),k=l.qb(),(C(l,$i)||1===k.getState())&&h.push(g[m]);d(h)},e)};Dp.prototype.requestInternal=Dp.prototype.G;Dp.prototype.Rd=function(a,b){b===lh.VISUAL&&(a=this.Db().get(a.po))&&(a.valid=!1,this.Sa(a))};Dp.prototype.invalidateObject=Dp.prototype.Rd;Dp.prototype.Jb=function(){return this.B};Dp.prototype.providesDomMarkers=Dp.prototype.Jb;\nDp.prototype.Kb=gf;Dp.prototype.providesMarkers=Dp.prototype.Kb;function Ep(){this.a={}}Ep.prototype.qb=function(a,b){var c=a+b,d;if(d=this.a[c])return d;a=Fp.MARKER.replace(\"{{icon}}\",Gp[a]||Gp.OTHER);a=a.replace(\"{{color}}\",Hp[b]||Hp.BLOCKING);b={size:{w:26,h:33},anchor:{x:13,y:30},hitArea:new Vi(Wi.POLYGON,Ip.MARKER)};return this.a[c]=d=new Uj(a,b)};\nvar Fp={MARKER:'<svg width=\"26\" height=\"33\" enable-background=\"new 0 0 26 33\" viewBox=\"0 0 26 33\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"m26 33h-26v-33h26z\" fill=\"#8c8c8c\" opacity=\"0\"/><path d=\"m17 29.566c0 1.116-1.791 2.022-4 2.022s-4-.906-4-2.022c0-1.118 1.791-2.026 4-2.026s4 .908 4 2.026\" fill=\"#878787\" opacity=\".6\"/><path d=\"m1.795 17.971c-1.562-1.555-1.574-3.828-.028-5.655l8.343-10.021c.769-.895 1.795-1.384 2.894-1.384 1.117 0 2.197.521 2.889 1.394l8.338 10.014c1.588 1.854 1.578 4.022-.029 5.65l-11.202 11.202z\" fill=\"{{color}}\"/>{{icon}}</svg>'},Gp=\n{CONGESTION:'<path style=\"fill:#FFFFFF;\" d=\"M12.966,1.177c0.965,0,1.894,0.442,2.496,1.204l8.378,10.258c1.362,1.592,1.482,3.477,0,4.979L12.994,28.464L2.143,17.618c-1.381-1.375-1.38-3.348,0-4.979l8.314-10.258C11.174,1.547,12.085,1.177,12.966,1.177 M12.967,0.177L12.967,0.177c-1.247,0-2.408,0.551-3.269,1.552l-8.332,10.28c-1.711,2.022-1.688,4.567,0.07,6.317l10.85,10.845l0.707,0.707l0.707-0.707l10.847-10.846c1.784-1.807,1.803-4.292,0.053-6.337L16.237,1.748C15.462,0.769,14.236,0.177,12.967,0.177L12.967,0.177z M16.645,10.405l-2.025-2.22c-0.48-0.51-1.15-0.8-1.84-0.8H9.53c-0.69,0-1.36,0.29-1.84,0.8l-1.94,2.22c-0.39,0.63-0.59,1.35-0.59,2.09v1.64c0,0.69,0.56,1.25,1.25,1.25h1.44l0.255-0.539c0.204-0.431,0.456-0.837,0.753-1.21l0.962-1.211l0.83-0.9c0.32-0.35,0.72-0.63,1.15-0.82H8.23c-0.28,0-0.55-0.07-0.79-0.22l-0.28-0.17l1.27-1.45c0.28-0.31,0.68-0.48,1.1-0.48h3.25c0.42,0,0.82,0.17,1.1,0.48l1.354,1.54H16.645z M18.31,12.205c-0.35-0.37-0.81-0.63-1.3-0.74c-0.18-0.04-0.36-0.06-0.54-0.06h-3.24c-0.7,0-1.37,0.29-1.84,0.8l-1.13,1.22l-0.82,1c-0.38,0.63-0.59,1.35-0.59,2.09v1.64c0,0.69,0.56,1.25,1.25,1.25h1.75v-1h5.99v1h1.75c0.69,0,1.25-0.56,1.25-1.25v-1.64c0-0.74-0.2-1.46-0.59-2.09L18.31,12.205z M12.1,17.105h-1c-0.138,0-0.25-0.112-0.25-0.25v-1c0-0.138,0.112-0.25,0.25-0.25h1c0.138,0,0.25,0.112,0.25,0.25v1C12.35,16.993,12.238,17.105,12.1,17.105z M18.59,17.105h-1c-0.138,0-0.25-0.112-0.25-0.25v-1c0-0.138,0.112-0.25,0.25-0.25h1c0.138,0,0.25,0.112,0.25,0.25v1C18.84,16.993,18.728,17.105,18.59,17.105z M18.56,14.505c-0.24,0.15-0.51,0.22-0.79,0.22h-5.85c-0.28,0-0.55-0.07-0.78-0.22l-0.29-0.17l1.27-1.45c0.15-0.16,0.33-0.28,0.53-0.37c0.18-0.07,0.38-0.11,0.58-0.11h3.24c0.24,0,0.48,0.06,0.68,0.16c0.16,0.08,0.3,0.19,0.42,0.32l1.27,1.45L18.56,14.505z M8.42,13.03h-1c-0.138,0-0.25-0.112-0.25-0.25v-1c0-0.138,0.112-0.25,0.25-0.25h1c0.138,0,0.25,0.112,0.25,0.25v1C8.67,12.918,8.559,13.03,8.42,13.03z\"/>',\nROADWORKS:'<path d=\"m13.004 1.411c.964 0 1.894.441 2.496 1.204l8.346 10.023c1.363 1.592 1.482 3.477 0 4.979l-10.846 10.847-10.852-10.846c-1.381-1.375-1.379-3.348 0-4.979l8.346-10.023c.717-.835 1.628-1.205 2.51-1.205m0-1c-1.248 0-2.408.551-3.268 1.552l-8.356 10.035c-1.718 2.033-1.695 4.578.064 6.328l10.85 10.845.706.707.707-.707 10.846-10.846c1.784-1.808 1.803-4.293.053-6.337l-8.337-10.012c-.769-.973-1.996-1.565-3.265-1.565zm-.575 15.264c.018-.332-.13-.651-.394-.851l-2.945-2.235-.21.36c-.22.39-.41.78-.58 1.19l-.677 2.129-1.364 3.051h1.314l2.109-4.672 1.317 1.212.138 3.46h1.092zm6.16-1.327c-.401-.54-1.209-.539-1.609.001l-1.17 1.58-2.29-1.74-.139-4.054c-.011-.276-.134-.535-.342-.716l-.7-.61c-.185-.161-.422-.25-.667-.25h-1.885c-.335 0-.648.168-.833.447l-1.144 1.723 7.58 5.76-1.86 2.51c-.098.132-.004.32.161.32h6.648l1.142-1.077zm-8.79-2.989-.876-.665.841-1.018.965.043zm1.63 1.24.969-1.781.118 2.61zm2.76-5.79c-.64 0-1.16.52-1.16 1.16 0 .65.52 1.17 1.16 1.17s1.16-.52 1.16-1.17c0-.64-.52-1.16-1.16-1.16z\" fill=\"#fff\"/>',\nACCIDENT:'<path style=\"fill:#FFFFFF;\" d=\"M12.998,1.091c0.964,0,1.894,0.442,2.496,1.204l8.346,10.344c1.363,1.592,1.482,3.477,0,4.979L12.994,28.465L2.143,17.618c-1.381-1.375-1.379-3.348,0-4.979l8.346-10.344C11.205,1.462,12.115,1.091,12.998,1.091 M12.998,0.091L12.998,0.091c-1.248,0-2.408,0.551-3.269,1.552L1.364,12.011c-1.708,2.021-1.685,4.566,0.073,6.316l10.85,10.845l0.707,0.707l0.707-0.707l10.846-10.846c1.784-1.808,1.803-4.293,0.053-6.337l-8.327-10.32C15.494,0.684,14.268,0.091,12.998,0.091L12.998,0.091z M7.83,18.982l-3.309-1.855l0.945,1.855H7.83z M16.111,19h3.942l1.596-2L16.111,19z M10.512,20.064l1.021-1.021l1.632,0.076c0.329,0.018,0.651-0.022,0.963-0.123c0.626-0.206,1.122-0.76,1.288-1.44l0.264-1.089l2.066-0.93c0.373-0.17,0.673-0.42,0.861-0.731c0.275-0.449,0.405-0.97,0.369-1.498L18.9,11.676l1.021-1.021l-0.724-0.724l-0.427,0.427l-0.121-0.364c-0.201-0.603-0.54-1.151-0.989-1.6l-1.159-1.159c-0.5-0.5-1.31-0.5-1.809,0l-1.267,1.267l0.724,0.724l-5.066,5.066l-0.724-0.724l-1.267,1.267c-0.5,0.5-0.5,1.31,0,1.809l1.159,1.159c0.449,0.449,0.997,0.788,1.6,0.989l0.364,0.121l-0.427,0.427L10.512,20.064z M14.901,10.349l0.732-0.732c0.098-0.098,0.256-0.098,0.354,0l0.732,0.732c0.098,0.098,0.098,0.256,0,0.354l-0.732,0.732c-0.098,0.098-0.256,0.098-0.354,0l-0.732-0.732C14.803,10.604,14.803,10.446,14.901,10.349z M9.472,15.777l0.732-0.732c0.098-0.098,0.256-0.098,0.354,0l0.732,0.732c0.098,0.098,0.098,0.256,0,0.354l-0.732,0.732c-0.098,0.098-0.256,0.098-0.354,0L9.472,16.13C9.375,16.033,9.375,15.874,9.472,15.777z M11.391,17.615c0.069-0.271,0.206-0.518,0.405-0.717l4.961-4.961c0.195-0.195,0.445-0.337,0.717-0.405l0.344-0.083l0.137,1.925c0.022,0.318-0.058,0.63-0.221,0.901c-0.101,0.166-0.279,0.271-0.409,0.329L14.8,15.74l-0.38,1.574c-0.083,0.344-0.318,0.615-0.612,0.713c-0.188,0.058-0.38,0.083-0.579,0.072l-1.925-0.138L11.391,17.615z\"/>',\nOTHER:'<path style=\"fill:#FFFFFF;\" d=\"M13.004,1.411c0.964,0,1.894,0.441,2.496,1.204l8.346,10.023c1.363,1.592,1.482,3.477,0,4.979L13,28.465L2.148,17.618c-1.381-1.375-1.379-3.348,0-4.979l8.346-10.023C11.211,1.781,12.122,1.411,13.004,1.411 M13.004,0.411L13.004,0.411c-1.248,0-2.408,0.551-3.268,1.552L1.38,11.998c-1.718,2.033-1.694,4.579,0.064,6.328l10.85,10.845L13,29.878l0.707-0.707l10.846-10.846c1.784-1.808,1.803-4.293,0.053-6.337L16.269,1.976C15.5,1.003,14.273,0.411,13.004,0.411L13.004,0.411z M14.716,20.139c0,0.947-0.758,1.724-1.724,1.724c-0.947,0-1.704-0.777-1.704-1.724c0-0.928,0.757-1.704,1.704-1.704C13.958,18.435,14.716,19.211,14.716,20.139z M14.204,16.33H11.78l-0.537-8.533h3.5L14.204,16.33z\"/>'},\nHp={BLOCKING:\"#323232\",VERYHIGH:\"#d5232f\",HIGH:\"#ffa100\"},Ip={MARKER:[24.1,17.8,14.2,28.42,16.8,29.4,12.8,31.4,8.79,29.4,11.23,28.42,1.7,17.8,1.7,12.1,10,1.9,12.9,.498,15.8,1.9,24.1,12.1,24.1,17.8]};function Jp(a,b,c){c=c?c:{};c.criticality||(c.criticality=\"major,critical\");C(a,Kp,Jp,0);Dp.call(this,{max:20,min:8,requestData:z(this.N,this),engineType:c.engineType});this.b=new Ep;this.v=a;this.i=c;this.reload=z(this.reload,this);this.u=setInterval(this.reload,b||18E4)}u(Jp,Dp);t(\"H.service.traffic.incidents.Provider\",Jp);var Lp={minor:\"HIGH\",\"low impact\":\"HIGH\",major:\"VERYHIGH\",critical:\"BLOCKING\"};\nJp.prototype.N=function(a,b,c,d,e){var f=this,g=this.b;return this.v.requestIncidentsByTile(a,b,c,function(h){var k=[];h=h.TRAFFIC_ITEMS;var l;if(h)for(h=h.TRAFFIC_ITEM,l=h.length;l--;){var m=h[l];var n=m.TRAFFIC_ITEM_TYPE_DESC;switch(n){case \"ACCIDENT\":case \"CONGESTION\":var q=n;break;case \"CONSTRUCTION\":q=\"ROADWORKS\";break;default:q=\"OTHER\"}q=g.qb(q,Lp[m.CRITICALITY.DESCRIPTION]);n=m.LOCATION.GEOLOC.ORIGIN;n=new Jn({lat:n.LATITUDE,lng:n.LONGITUDE},{provider:f,icon:q});n.setData(m);k.push(n)}d(k)},\ne,this.i)};Jp.prototype.D=function(){Dp.prototype.D.call(this);clearInterval(this.u)};Jp.prototype.dispose=Jp.prototype.D;var Mp=\"A21 A22 F01 F02 F08 F04 F05 F07 F03 F06 A2F F13 A25 A2C F12 D1B F1B A27 E12 A3A A24 A3D A3F F1F F25 F2C E32 A33 F29 D26 D36 F26 D0F F0F F2B E0C D3A A45 D23 D11 F2E F19 F14 F39 A4A A4B A5C D38 F2A F1A D0A F1C A48 D25 D1D F32 A46 A3E D24 E1C E32 A5F D2E D22 D0A\".split(\" \");function Np(a,b,c,d){Np.l.constructor.call(this,{min:10,max:21,engineType:d});C(a,Kp,Np,0);this.u=a;this.b=c||Op;this.b.responseattributes=\"sh,fc\";this.i=setInterval(z(this.reload,this),b||18E4);this.c===ik.WEBGL?this.Pb(new qi(to()+\"/traffic/flow.yaml\"),!0):this.Pb(new H.map.render.harp.Style({styles:[{when:[\"==\",[\"geometry-type\"],\"LineString\"],technique:\"solid-line\",renderOrder:10002,attr:{color:[\"case\",[\">=\",[\"get\",\"JF\"],10],\"black\",[\">=\",[\"get\",\"JF\"],8],\"red\",[\">=\",[\"get\",\"JF\"],4],\"yellow\",\"green\"],\nlineWidth:3,metricUnit:\"Pixel\"}}]}))}u(Np,S);t(\"H.service.traffic.flow.Provider\",Np);Np.prototype.Vh=gf;Np.prototype.providesGeoJSON=Np.prototype.Vh;Np.prototype.ea=function(){return this.gb()};Np.prototype.getStyle=Np.prototype.ea;Np.prototype.cc=function(a){a.b&&a.b(\"GeoJSONTileSource\");this.Pb(a)};Np.prototype.setStyle=Np.prototype.cc;var Op={locationreferences:\"tmc,shp\"};Np.prototype.o=function(){Np.l.o.call(this);clearInterval(this.i)};\nNp.prototype.G=function(a,b,c,d,e){return this.u.requestFlowByTile(a,b,c,function(f){f.type&&-1!==f.type.indexOf(\"Error\")?e(f.Details):d(f)},e,this.b)};Np.prototype.requestInternal=Np.prototype.G;\nNp.prototype.Tb=function(a,b,c,d,e){var f,g,h,k,l={type:\"FeatureCollection\",features:[]},m;var n=d.RWS.length;for(f=0;f<n;f++){var q=d.RWS[f];var r=q.RW;var v=r.length;var w=-1!==Mp.indexOf(q.EXTENDED_COUNTRY_CODE+q.EBU_COUNTRY_CODE);for(q=0;q<v;q++){var A=r[q].FIS;var J=A.length;for(A=0;A<J;A++){var I=r[q].FIS[A].FI;var Y=I.length;for(g=0;g<Y;g++){var ba=I[g];var Ja=[];var ka=ba.CF[0];var lc=!!ka.SSS;var zb={type:\"Feature\",properties:ka,geometry:{type:\"MultiLineString\",coordinates:Ja}};zb.properties.LHT=\nw;ba.SHP.length&&(zb.properties.FC=ba.SHP[0].FC);lc&&(m=[]);for(ka=0;ka<ba.SHP.length;ka++){var pd=ba.SHP[ka].value;var Mi=pd.length;for(h=0;h<Mi;h++){var Ye=lc?m:void 0,Xb=new io(pd[h].trim()),gg=[],gd={};for(Xb.de();-1!==(k=Xb.Ib());)k===Pp?(gd.lat=+String.fromCharCode.apply(Np,Xb.Dd()),Xb.next(),Xb.de()):k===Qp?(gd.lng=+String.fromCharCode.apply(Np,Xb.Dd()),gg.push([gd.lng,gd.lat]),Ye&&Ye.push(og(gd)),gd=[],Xb.next(),Xb.de()):Xb.next();gd.lng=+String.fromCharCode.apply(Np,Xb.Dd());gg.push([gd.lng,\ngd.lat]);Ye&&Ye.push(og(gd));k=gg;Ja.push(k)}}l.features.push(zb)}}}}return Np.l.Tb.call(this,a,b,c,l,e)};Np.prototype.createTileInternal=Np.prototype.Tb;var Qp=32,Pp=44;function Rp(a,b){b=void 0===b?{}:b;if(!a.Rj)throw new Zc(a);Rp.l.constructor.call(this);var c=Sp(this,b);if(!c.baseUrl&&!c.platformBaseUrl)throw new D(a,0,'either \"baseUrl\" or \"platformBaseUrl\" must be specified');this.i=(c.baseUrl?c.baseUrl:c.platformBaseUrl).clone();a=c.baseUrl?b:c;a.host&&this.i.Xe(a.host);a.subDomain&&this.i.za(a.subDomain);a.path&&this.i.td(a.path);Bp(this.i);this.g=c.headers||{}}u(Rp,F);t(\"H.service.Service\",Rp);function Sp(a,b){a=a.Ia();return b?qp({},a,b):a}\nRp.prototype.Ia=function(){return{}};Rp.prototype.C=function(){return this.i};Rp.prototype.getUrl=Rp.prototype.C;Rp.prototype.G=function(a,b,c,d){d=new uf(void 0===d?\"application/json\":d,a.toString(),ie,{headers:this.g});d.then(b,Tp(this,a,c));return d};function Tp(a,b,c){return function(d){return\"function\"!==typeof d.json?Promise.reject(c(Up(b,d))):d.json().then(function(e){return c(a.a(e))},function(){return c(Up(b,d))})}}Rp.prototype.a=function(a){return Error(a.message)};\nfunction Up(a,b){return Error((b.statusText?\"[\"+b.statusText+\"] \":\"\")+a+\" request failed\")};function Vp(a){function b(m){d.contains(e)&&d.removeChild(e);l&&clearTimeout(l);delete Vp.a[f];m&&a.fj&&a.fj.call(k,m)}if(!a.url||!a.Gg)throw Error('Parameter \"options\" must specify at least a URL and a callback.');if(\"function\"!==typeof a.Gg)throw Error(\"Parameters options.callback must be a function\");var c=a.Lo||document;var d=c.getElementsByTagName(\"head\")[0];var e=c.createElement(\"script\");c=a.url instanceof V?a.url:vp(a.url,a.Ko);var f=Vp.b++;var g=a.ul||\"callback\";var h=a.Gg;var k={};var l=\nnull;k.id=f;k.cancel=function(){b(\"cancelled\")};0!==a.timeout&&(l=x.setTimeout(function(){b(\"timeout\")},a.timeout||3E4));Vp.a[f]=function(m){b();h.call(k,m)};e.type=\"text/javascript\";e.src=c.toString()+(c.Kj()?\"&\":\"?\")+g+\"=\"+(a.Mo?\"H.service.jsonp.handleResponse(\"+f+\")\":encodeURI(\"H.service.jsonp.handleResponse(\"+f+\")\"));d.appendChild(e);return k}t(\"H.service.jsonp\",Vp);Vp.cn=function(a){return(a=Vp.a[a])?a:function(){}};Vp.handleResponse=Vp.cn;Vp.b=0;Vp.a={};function Kp(a){Kp.l.constructor.call(this,Kp,a);this.b=Sp(this,a).callbackKey}u(Kp,Rp);t(\"H.service.traffic.Service\",Kp);Kp.prototype.Ia=function(){return{subDomain:\"traffic.ls\",path:\"traffic/6.1\",callbackKey:\"jsoncallback\"}};Kp.CONFIG_KEY=\"traffic\";Kp.prototype.Ui=function(a,b){return new ql(new Np(this,void 0,a,b),{max:22})};Kp.prototype.createFlowLayer=Kp.prototype.Ui;Kp.prototype.Vi=function(a){return new Kn(new Jp(this,void 0,a))};Kp.prototype.createIncidentsLayer=Kp.prototype.Vi;\nfunction Wp(a,b,c,d){return Vp({url:b,Gg:c,fj:function(e){d(Error(\"[\"+e+\"] \"+b+\" request failed\"))},ul:a.b})}Kp.prototype.ao=function(a,b,c){a=this.C().clone().F(\"incidents.json\").I(a);return Wp(this,a,b,c)};Kp.prototype.requestIncidents=Kp.prototype.ao;Kp.prototype.$n=function(a,b,c,d,e,f){a=this.C().clone().F([\"flow/json\",c,a,b].join(\"/\")).I(f||{});return Wp(this,a,d,e)};Kp.prototype.requestFlowByTile=Kp.prototype.$n;\nKp.prototype.bo=function(a,b,c,d,e,f){a=this.C().clone().F([\"incidents/json\",c,a,b].join(\"/\")).I(f||{});return Wp(this,a,d,e)};Kp.prototype.requestIncidentsByTile=Kp.prototype.bo;W.prototype.Dj=function(a){return this.Ma(Kp,a)};W.prototype.getTrafficService=W.prototype.Dj;function Xp(a){Xp.l.constructor.call(this,Xp,a);this.b=Sp(this,a).reverseSubDomain}u(Xp,Rp);t(\"H.service.GeocodingService\",Xp);Xp.prototype.Ia=function(){return{subDomain:\"geocoder.ls\",reverseSubDomain:\"reverse\",path:\"6.2\"}};Xp.CONFIG_KEY=\"geocoding\";Xp.prototype.a=function(a){return Error(a.Details||a.message||a.error)};Xp.prototype.Rg=function(a,b,c){a=this.C().clone().F(\"geocode.json\").I(a);return this.G(a,b,c)};Xp.prototype.geocode=Xp.prototype.Rg;\nXp.prototype.Zh=function(a,b,c){a=this.C().clone().F(\"reversegeocode.json\").I(a);this.b&&a.za(this.b);return this.G(a,b,c)};Xp.prototype.reverseGeocode=Xp.prototype.Zh;Xp.prototype.search=function(a,b,c){a=this.C().clone().F(\"search.json\").I(a);return this.G(a,b,c)};Xp.prototype.search=Xp.prototype.search;W.prototype.qj=function(a){rp(W.prototype.qj,\"Use H.service.Platform#getSearchService instead\");return this.Ma(Xp,a)};W.prototype.getGeocodingService=W.prototype.qj;function Yp(a){Yp.l.constructor.call(this,Yp,a)}u(Yp,Rp);t(\"H.service.PlacesService\",Yp);Yp.prototype.Ia=function(){return{subDomain:\"places.ls\",path:\"places/v1\"}};Yp.CONFIG_KEY=\"places\";Yp.EntryPoint={SEARCH:\"discover/search\",SUGGEST:\"suggest\",EXPLORE:\"discover/explore\",AROUND:\"discover/around\",HERE:\"discover/here\",CATEGORIES:\"categories/places\"};Yp.prototype.request=function(a,b,c,d){return Zp(this,a,b,c,d)};Yp.prototype.request=Yp.prototype.request;\nfunction Zp(a,b,c,d,e){b=a.C().clone().F(b).I(c||{});return a.G(b,d,e)}Yp.prototype.search=function(a,b,c){return Zp(this,\"discover/search\",a,b,c)};Yp.prototype.search=Yp.prototype.search;Yp.prototype.oo=function(a,b,c){return Zp(this,\"suggest\",a,b,c)};Yp.prototype.suggest=Yp.prototype.oo;Yp.prototype.El=function(a,b,c){return Zp(this,\"discover/explore\",a,b,c)};Yp.prototype.explore=Yp.prototype.El;Yp.prototype.ql=function(a,b,c){return Zp(this,\"discover/around\",a,b,c)};Yp.prototype.around=Yp.prototype.ql;\nYp.prototype.en=function(a,b,c){return Zp(this,\"discover/here\",a,b,c)};Yp.prototype.here=Yp.prototype.en;Yp.prototype.vl=function(a,b,c){return Zp(this,\"categories/places\",a,b,c)};Yp.prototype.categories=Yp.prototype.vl;Yp.prototype.Fl=function(a,b,c,d){a=vp(a).I(this.C().getQuery()).I(d||{});return this.G(a,b,c)};Yp.prototype.follow=Yp.prototype.Fl;W.prototype.zj=function(a){rp(W.prototype.zj,\"Use H.service.Platform#getSearchService instead\");return this.Ma(Yp,a)};\nW.prototype.getPlacesService=W.prototype.zj;function $p(){this.a={}}function aq(a,b){for(var c in b)if(b.hasOwnProperty(c)){var d,e=b[c],f=a.a[c]||(a.a[c]=[]),g=e.length;for(d=0;d<g;d++)f.push(new bq(e[d]))}}function cq(a,b,c,d){var e=(a=a.a[b])?a.length:0,f=[];for(b=0;b<e;b++)a[b].jd(c,d)&&f.push(a[b]);return f}\nfunction bq(a){var b,c=a.boxes;this.label=a.label;this.min=a.minLevel;this.max=a.maxLevel;this.b=[];if(c&&(b=c.length)){var d=c[0];var e=new K(d[0],d[1],d[2],d[3]);this.b.push(e);this.a=new K(d[0],d[1],d[2],d[3]);for(a=1;a<b;a++)d=c[a],e=new K(d[0],d[1],d[2],d[3]),this.b.push(e),this.a.Yb(e,!1,this.a)}}bq.prototype.jd=function(a,b){if(a>=this.min&&a<=this.max)if((a=this.b.length)&&this.a){if(this.a.jd(b))for(;a--;)if(this.b[a].jd(b))return!0}else return!0;return!1};function dq(a,b,c){var d=this,e=c||{},f=+e.min,g=+e.max;e.tileSize=e.tileSize||512;e.min=f?$d(f,1,17):1;e.min+=Nk(e.tileSize,1);e.max=g?$d(g,1,17):17;dq.l.constructor.call(this,e);C(a,eq,dq,0);C(b,Th,dq,1);this.j=a;b.b&&b.b(\"OMV\");this.Pb(b,!0);this.b=!1;c&&(c.politicalView&&(this.i=c.politicalView),fq(this,c.lg,c.lg2),this.b=!!c.pois);this.N=function(){gq(d);d.reload(!1)};a.addEventListener(\"versionupdate\",this.N);gq(this);dq.prototype.Y=function(){var h=/^v2\\/vectortiles\\/(.+)\\/mc$/.exec(a.C().b);\nreturn h?h[1]:B+\"\"}()}u(dq,S);t(\"H.service.omv.Provider\",dq);dq.prototype.md=gf;dq.prototype.providesOMV=dq.prototype.md;function gq(a){var b=a.hd(\"_#-;,:\",\"_#-;,:\",\"_#-;,:\");a.X=new RegExp(\"^\"+b.replace(/[.*+?^${}()|[\\]\\\\\\/]/g,\"\\\\$&\").replace(/_#-;,:/g,\"\\\\d+\")+\"$\")}dq.prototype.Sb=function(a){return this.X.test(a)};dq.prototype.cacheFilter=dq.prototype.Sb;dq.prototype.hd=function(a,b,c){return hq(this.j,a,b,c).toString()};dq.prototype.getTileKey=dq.prototype.hd;dq.prototype.Db=function(){return this.ua};\ndq.prototype.getCache=dq.prototype.Db;dq.prototype.Cm=function(){return this.i};dq.prototype.getPoliticalView=dq.prototype.Cm;dq.prototype.ho=function(a){var b=this.i;this.i=a;this.dispatchEvent(new aj(\"politicalviewchange\",this.i,b))};dq.prototype.setPoliticalView=dq.prototype.ho;dq.prototype.MAX_STORE_TIME=2592E6;dq.prototype.m=function(){return nd()};dq.prototype.f=function(){return nd()?md():dq.l.f.call(this)};dq.prototype.G=function(a,b,c,d,e){return this.j.Qa(a,b,c,d,e)};\ndq.prototype.requestInternal=dq.prototype.G;dq.prototype.cc=function(a){a.b&&a.b(\"OMV\");this.Pb(a)};dq.prototype.setStyle=dq.prototype.cc;dq.prototype.ea=function(){return dq.l.gb.apply(this)};dq.prototype.getStyle=dq.prototype.ea;\ndq.prototype.gb=function(){var a=dq.l.gb.apply(this),b=a.getState()===Uh.READY,c=a.Lc();b?c&&c.global&&(this.u&&(this.K&&(c.global.ux_language=this.K),this.B&&(c.global.ux_language_fallback=this.B)),this.b&&c.global.poi&&c.global.poi[\"default\"]&&(c.global.poi[\"default\"].visible=this.b),this.u||this.b)&&(a=new qi(c,a.Bb())):a.load();return a};dq.prototype.getStyleInternal=dq.prototype.gb;\nfunction fq(a,b,c){var d=Bc(b),e=Bc(c);d&&(a.K=b);e&&(a.B=c);if(d||e)a.v=[],d=/^([a-zA-Z]{2})(-|$)/,(b=d.exec(b))&&a.v.push(b[1]),(b=d.exec(c))&&a.v.push(b[1]),a.u=!0}dq.prototype.u=!1;var iq=[\"en\"];dq.prototype.Zg=function(){return this.v||iq};dq.prototype.getLanguages=dq.prototype.Zg;dq.prototype.o=function(){dq.l.o.call(this);this.j.removeEventListener(\"versionupdate\",this.N)};dq.prototype.ua=new Pk(256);dq.prototype.ba=function(a,b){return cq(this.j.ba(),this.Y,b,a)};\ndq.prototype.getCopyrights=dq.prototype.ba;function eq(a){eq.l.constructor.call(this,eq,a);a=Sp(this,a).mapVersion;this.b=vc(a)?a:jq[this.C().toString()];vc(this.b)||kq(this)}u(eq,Rp);t(\"H.service.omv.Service\",eq);eq.prototype.Ia=function(){return{subDomain:\"vector\",path:\"v2/vectortiles/base/mc\"}};eq.CONFIG_KEY=\"omv\";var jq={};Hc(jq);eq.prototype.tm=function(){return this.b};eq.prototype.getMapVersion=eq.prototype.tm;\nfunction kq(a){a.G(a.C().clone().F(\"../../info\"),function(b){b=b.mapVersion;var c=a.C().toString();a.b=b;b!==jq[c]&&(jq[c]=b,a.dispatchEvent(\"versionupdate\"))},function(){})}eq.prototype.cd=function(a,b){b=b||{};var c={min:0,max:22};lo&&(b.min=c.min=4);return new ql(new dq(this,a,b),c)};eq.prototype.createLayer=eq.prototype.cd;eq.prototype.Qa=function(a,b,c,d,e){return this.G(hq(this,a,b,c),function(f){return f.arrayBuffer().then(d,e)},e,\"arraybuffer\")};\nfunction hq(a,b,c,d){b=a.C().clone().F(d+\"/\"+b+\"/\"+c+\"/omv\");vc(a.b)&&b.I({mv:a.b});return b}eq.prototype.Ee=function(a,b){if(!Da(a))throw new D(this.Ee,0,'\"onResult\" must be a function');if(!Da(b))throw new D(this.Ee,1,'\"onError\" must be a function');return this.G(this.C().clone().td(\"v2/vectortiles/pviews\"),a,b)};eq.prototype.getPoliticalViews=eq.prototype.Ee;W.prototype.xj=function(a){return this.Ma(eq,a)};W.prototype.getOMVService=W.prototype.xj;eq.prototype.f=function(a){aq(this.c,a);this.dispatchEvent(\"copyrightupdate\")};\neq.prototype.ba=function(){this.c||(this.c=new $p,this.G(this.C().clone().F(\"../../copyrights\"),z(this.f,this),kd));return this.c};eq.prototype.getCopyrights=eq.prototype.ba;function lq(a){lq.l.constructor.call(this,lq,a);this.b=a.getToken}u(lq,Rp);t(\"H.service.iml.Service\",lq);lq.prototype.Ia=function(){return{host:\"interactive.data.api.platform.here.com\",path:\"interactive/v1/catalogs\"}};\nlq.prototype.a=function(a){function b(){for(var d=fa(c),e=d.next();!e.done;e=d.next()){e=e.value;var f=e.format;if(e.keys.every(function(g){return a[g]}))return f()}return JSON.stringify(a)}var c=[{keys:[\"code\",\"title\",\"cause\",\"action\"],format:function(){return a.code+\": \"+a.title+\"; cause: \"+a.cause+\"; action: \"+a.action}},{keys:[\"error\",\"error_description\"],format:function(){return a.error+\": \"+a.error_description}},{keys:[\"error\",\"errorMessage\"],format:function(){return a.error+\": \"+a.errorMessage}}];\nreturn Error(Ea(a)?b():a)};lq.prototype.Od=function(a,b,c,d,e){var f=this.Od;mq(f,0,a,b);nq(f,2,c,d);a=this.C().clone().F(a+\"/layers/\"+b+\"/statistics\").I(e||{});return oq(this,a,\"GET\",c,d)};lq.prototype.getStatistics=lq.prototype.Od;lq.prototype.yf=function(a,b,c,d,e,f,g,h,k){var l=k?\"\":\".mvtf\";a=this.C().clone().F(d+\"/layers/\"+e+\"/tile/web/\"+c+\"_\"+a+\"_\"+b+l).I(Object.assign({clip:!0},h));return oq(this,a,\"GET\",k?f:function(m){return m.arrayBuffer().then(f)},g,void 0,k?\"application/json\":\"arraybuffer\")};\nlq.prototype.getFeaturesByTile=lq.prototype.yf;lq.prototype.nj=function(a,b,c,d,e,f){var g=this.nj;pq(g,a);mq(g,1,b,c);nq(g,3,d,e);a=qq(this,a,b,c,f);return oq(this,a,\"GET\",d,e)};lq.prototype.getFeatureById=lq.prototype.nj;lq.prototype.Nc=function(a,b,c,d,e,f){var g=this.Nc;rq(g,a);mq(g,1,b,c);nq(g,3,d,e);a=sq(this,a,b,c,f);return oq(this,a,\"GET\",d,e)};lq.prototype.getFeaturesById=lq.prototype.Nc;\nlq.prototype.Hd=function(a,b,c,d,e){var f=this.Hd;if(!Ea(a)||!(a.bbox||a.north&&a.east&&a.south&&a.west))throw new D(f,0,'must be an object with either \"bbox\" or a full set of \"north\", \"east\", \"south\" and \"west\"');mq(f,1,b,c);nq(f,3,d,e);a=this.C().clone().F(b+\"/layers/\"+c+\"/bbox\").I(a);return oq(this,a,\"GET\",d,e)};lq.prototype.getFeaturesByBoundingBox=lq.prototype.Hd;\nlq.prototype.pj=function(a,b,c,d,e){var f=this.pj;if(!(Ea(a)&&a.radius&&(a.lat&&(a.lng||a.lon)||a.refCatalogHrn&&a.refLayerId&&a.refFeatureId)))throw new D(f,0,'must be an object with \"radius\" and a combination of either \"lat\"+\"lng\" or \"refCatalogHrn\"+\"refLayerId\"+\"refFeatureId\"');mq(f,1,b,c);nq(f,3,d,e);a=this.C().clone().F(b+\"/layers/\"+c+\"/spatial\").I(a);return oq(this,a,\"GET\",d,e)};lq.prototype.getFeaturesByPointAndRadius=lq.prototype.pj;\nlq.prototype.oj=function(a,b,c,d,e,f){var g=this.oj;if(!Ea(a)||!a.radius)throw new D(g,0,'must be an object with \"radius\"');uq(g,1,b);mq(g,2,c,d);nq(g,4,e,f);a=this.C().clone().F(c+\"/layers/\"+d+\"/spatial\").I(a);return oq(this,a,\"POST\",e,f,b)};lq.prototype.getFeaturesByGeometryAndRadius=lq.prototype.oj;lq.prototype.Jk=function(a,b,c,d,e){var f=this.Jk;mq(f,0,a,b);nq(f,2,c,d);a=this.C().clone().F(a+\"/layers/\"+b+\"/search\").I(e||{});return oq(this,a,\"GET\",c,d)};lq.prototype.searchFeatures=lq.prototype.Jk;\nlq.prototype.Vj=function(a,b,c,d,e){var f=this.Vj;mq(f,0,a,b);nq(f,2,c,d);a=this.C().clone().F(a+\"/layers/\"+b+\"/iterate\").I(e||{});return oq(this,a,\"GET\",c,d)};lq.prototype.iterateFeatures=lq.prototype.Vj;lq.prototype.Vc=function(a,b,c,d,e,f){var g=this.Vc;uq(g,0,a);mq(g,1,b,c);nq(g,3,d,e);b=vq(this,b,c,f);return oq(this,b,\"PUT\",d,e,a)};lq.prototype.putFeatures=lq.prototype.Vc;\nlq.prototype.Tc=function(a,b,c,d,e,f){var g=this.Tc;uq(g,0,a);mq(g,1,b,c);nq(g,3,d,e);b=vq(this,b,c,f);return oq(this,b,\"POST\",d,e,a)};lq.prototype.postFeatures=lq.prototype.Tc;lq.prototype.dd=function(a,b,c,d,e){var f=this.dd;rq(f,a);mq(f,1,b,c);nq(f,3,d,e);a=sq(this,a,b,c);return oq(this,a,\"DELETE\",d,e)};lq.prototype.deleteFeatures=lq.prototype.dd;lq.prototype.Ck=function(a,b,c,d,e,f,g){var h=this.Ck;pq(h,a);uq(h,1,b);mq(h,2,c,d);nq(h,4,e,f);a=qq(this,a,c,d,g);return oq(this,a,\"PUT\",e,f,b)};\nlq.prototype.putFeature=lq.prototype.Ck;lq.prototype.wk=function(a,b,c,d,e,f,g){var h=this.wk;pq(h,a);uq(h,1,b);mq(h,2,c,d);nq(h,4,e,f);a=qq(this,a,c,d,g);return oq(this,a,\"PATCH\",e,f,b)};lq.prototype.patchFeature=lq.prototype.wk;lq.prototype.Zi=function(a,b,c,d,e){var f=this.Zi;pq(f,a);mq(f,1,b,c);nq(f,3,d,e);a=qq(this,a,b,c);return oq(this,a,\"DELETE\",d,e,void 0,\"text/plain\")};lq.prototype.deleteFeature=lq.prototype.Zi;\nfunction vq(a,b,c,d){return a.C().clone().F(b+\"/layers/\"+c+\"/features\").I(d||{})}function sq(a,b,c,d,e){b=Object.assign({},e,{id:new zp(b)});return vq(a,c,d,b)}function qq(a,b,c,d,e){return a.C().clone().F(c+\"/layers/\"+d+\"/features/\"+b).I(e||{})}\nfunction oq(a,b,c,d,e,f,g){g=void 0===g?\"application/json\":g;c={method:c,headers:Object.assign({},f?{\"Content-Type\":\"application/geo+json\"}:void 0,\"function\"===typeof a.b?{Authorization:\"Bearer \"+a.b()}:void 0,a.g)};f&&(c.data=JSON.stringify(f));f=new uf(g,b.toString(),ie,c);f.then(d,Tp(a,b,e));return f}lq.CONFIG_KEY=\"iml\";function mq(a,b,c,d){yc(c,\"String\",a,b,\"must be a string\");yc(d,\"String\",a,b+1,\"must be a string\")}function pq(a,b){yc(b,\"String\",a,0,\"must be a string\")}\nfunction rq(a,b){if(!Array.isArray(b)||0===b.length||b.some(function(c){return\"string\"!==typeof c}))throw new D(a,0,\"must be a non-empty array of strings\");}function uq(a,b,c){if(!Ea(c))throw new D(a,b,\"must be a GeoJSON object\");}function nq(a,b,c,d){if(!Da(c))throw new D(a,b,\"must be a function\");if(!Da(d))throw new D(a,b+1,\"must be a function\");}W.prototype.jm=function(a){return this.Ma(lq,a)};W.prototype.getIMLService=W.prototype.jm;function wq(a,b,c,d){wq.l.constructor.call(this,d?{min:d.min,max:d.max,engineType:d.engineType}:void 0);C(a,lq,wq,0);if(!Bc(b))throw new D(wq,1,'\"catalogHrn\" must be a string');if(!Bc(c))throw new D(wq,2,'\"layerId\" must be a string');this.v=a;this.b=b;this.i=c;this.u=Ea(d)&&Ea(d.parameters)?d.parameters:{};this.Pb(this.c===ik.WEBGL?new qi({sources:{iml:{type:\"MVT\"}},layers:{iml:{data:{source:\"iml\",layer:this.b+\":\"+this.i},points:{filter:{$geometry:\"point\"},draw:{points:{collide:!1,order:200,color:\"#92CF48\",\nsize:[[10,\"8px\"],[14,\"12px\"],[18,\"16px\"]]}}},polygons:{filter:{$geometry:\"polygon\"},draw:{polygons:{order:201,color:\"#E39E3C\"},lines:{order:202,color:\"#755DA5\",width:\"1px\"}}},lines:{filter:{$geometry:\"line\"},draw:{lines:{order:203,color:\"#0258AE\",width:\"2px\",join:\"round\",cap:\"round\"}}}}}}):new H.map.render.harp.Style({styles:[{layer:this.b+\":\"+this.i,when:[\"==\",[\"geometry-type\"],\"Point\"],technique:\"circles\",renderOrder:200,color:\"#92CF48\",size:[\"interpolate\",[\"linear\"],[\"zoom\"],10,8,14,12,18,16]},\n{layer:this.b+\":\"+this.i,when:[\"==\",[\"geometry-type\"],\"Polygon\"],technique:\"fill\",color:\"#E39E3C\",renderOrder:201},{layer:this.b+\":\"+this.i,when:[\"==\",[\"geometry-type\"],\"Polygon\"],technique:\"solid-line\",color:\"#755DA5\",lineWidth:\"1px\",renderOrder:202},{layer:this.b+\":\"+this.i,when:[\"==\",[\"geometry-type\"],\"LineString\"],technique:\"solid-line\",color:\"#0258AE\",lineWidth:\"2px\",renderOrder:203}]}))}u(wq,S);t(\"H.service.iml.Provider\",wq);\nwq.prototype.G=function(a,b,c,d,e){return this.v.yf(a,b,c,this.b,this.i,d,e,this.u)};wq.prototype.requestInternal=wq.prototype.G;wq.prototype.md=gf;wq.prototype.providesOMV=wq.prototype.md;wq.prototype.ea=function(){return this.gb()};wq.prototype.getStyle=wq.prototype.ea;wq.prototype.cc=function(a){C(a,qi)&&a.b(\"MVT\");this.Pb(a)};wq.prototype.setStyle=wq.prototype.cc;function xq(a){a=void 0===a?{}:a;xq.l.constructor.call(this,xq,a);this.b={dg:a.resource||\"base\",Vf:a.projection||\"mc\",format:a.format||\"png\"};this.f=a.queryParams||{}}u(xq,Rp);t(\"H.service.rasterTile.Service\",xq);p=xq.prototype;p.ea=function(){return this.f.style||\"explore.day\"};p.Ia=function(){return{subDomain:\"maps\",path:\"v3\"}};p.ba=function(){this.c||(this.c=new $p,this.G(this.C().clone().F(\"copyright\"),z(this.zn,this),kd));return this.c};\np.zn=function(a){var b=a.copyrights;a=a.resources;var c={},d=this.b.dg+\".\"+this.ea();c[d]=[];a[this.b.dg].styles[this.ea()].forEach(function(e){b[e].forEach(function(f){var g=[];f.boundingBoxes.forEach(function(h){g.push([h.north,h.west,h.south,h.east])});c[d].push({boxes:g,label:f.label,alt:f.alt,minLevel:f.minLevel,maxLevel:f.maxLevel})})});aq(this.c,c)};p.Be=function(a,b){return this.G(this.C().clone().F(\"info\"),a,b)};xq.prototype.getInfo=xq.prototype.Be;\nxq.prototype.Ee=function(a,b){return this.G(this.C().clone().F(\"politicalViews\"),a,b)};xq.prototype.getPoliticalViews=xq.prototype.Ee;xq.prototype.fm=function(a,b){return this.G(this.C().clone().F(\"features\"),a,b)};xq.prototype.getFeatures=xq.prototype.fm;xq.prototype.Zg=function(a,b){return this.G(this.C().clone().F(\"languages\"),a,b)};xq.prototype.getLanguages=xq.prototype.Zg;xq.CONFIG_KEY=\"rasterTile\";W.prototype.Im=function(a){return this.Ma(xq,a)};W.prototype.getRasterTileService=W.prototype.Im;function yq(a,b){C(a,xq,yq,0);var c={};Object.assign(c,b);c.min=c.min||0;c.max=c.max||20;c.tileSize=c.tileSize||512;c.getURL=function(d,e,f){return a.C().clone().F(a.b.dg+\"/\"+(a.b.Vf+\"/\")+(f+\"/\"+d+\"/\"+e+\"/\")+a.b.format).I(a.f).clone().I({size:c.tileSize})};Ck.call(this,c);this.i=a}u(yq,Ck);t(\"H.service.rasterTile.Provider\",yq);yq.prototype.ba=function(a,b){var c=this.i;return cq(c.ba(),c.b.dg+\".\"+c.ea(),b,a)};yq.prototype.getCopyrights=yq.prototype.ba;yq.prototype.m=function(){return nd()};\nyq.prototype.f=function(){return nd()?md():yq.l.f.call(this)};function zq(a,b,c,d,e,f,g){var h=this;g=g||{};f=f?f:{};var k=a.C().clone().F(b+\"/\"+a.oc()+\"/\"+c).I(f),l=a.c;this.B=a;this.N=k;Ck.call(this,{tileSize:d,max:512===d?19:20,min:512===d?2:0,getURL:function(m,n,q){var r=h.N.clone();l&&r.za(l[(q+n+m)%l.length]);r.F(q+\"/\"+m+\"/\"+n+\"/\"+d+\"/\"+e);return r.toString()},crossOrigin:g.crossOrigin,headers:g.headers,uri:k.toString().replace(/_/g,\"\")+d,engineType:g.engineType});this.Ya=b;this.ya=c;this.ua=f;this.Y=c.split(\".\")[0];this.i=z(this.i,this);this.getCopyrights=\nthis.ba;a.addEventListener(\"versionupdate\",this.i)}u(zq,Ck);zq.prototype.MAX_STORE_TIME=2592E6;zq.prototype.o=function(){Ck.prototype.o.call(this);this.B.removeEventListener(\"versionupdate\",this.i)};zq.prototype.ba=function(a,b){return cq(this.B.ba(),this.Y,b,a)};zq.prototype.getCopyrights=zq.prototype.ba;zq.prototype.i=function(){var a=this.B;this.N=a.C().clone().F(this.Ya+\"/\"+a.oc()+\"/\"+this.ya).I(this.ua);this.reload(!1)};zq.prototype.m=function(){return nd()};\nzq.prototype.f=function(){return nd()?md():zq.l.f.call(this)};function Aq(a){Aq.l.constructor.call(this,Aq,a);a=Sp(this,a);this.c=a.shards;(this.f=a.ignoreTypes?null:a.type)&&this.C().za(this.f);this.b=a.version;this.m=new $p;this.s={};this.j=0;\"newest\"===this.b&&Bq(this)}u(Aq,Rp);t(\"H.service.MapTileService\",Aq);Aq.prototype.Ia=function(){return{subDomain:\"maps.ls\",path:\"maptile/2.1\",type:\"base\",version:\"newest\",shards:[\"1\",\"2\",\"3\",\"4\"]}};Aq.CONFIG_KEY=\"maptile\";function Cq(a,b){for(var c={},d=a[b+\"s\"][b],e=d.length;e--;)c[d[e].id]=d[e];a[b+\"s\"]=c}\nAq.prototype.Ej=function(){return this.f};Aq.prototype.getType=Aq.prototype.Ej;Aq.prototype.oc=function(){return this.b};Aq.prototype.getVersion=Aq.prototype.oc;Aq.prototype.ba=function(){this.j||(this.b&&\"newest\"!==this.b||\"traffic\"===this.f)&&Dq(this);return this.m};Aq.prototype.getCopyrights=Aq.prototype.ba;\nfunction Bq(a){var b=a.C().clone().F(\"info\").I({output:\"json\"});a.c&&b.za(a.c[0]);a.G(b,function(c){c=c.response;var d;Cq(c,\"map\");Cq(c,\"scheme\");Cq(c,\"tiletype\");Cq(c,\"format\");Cq(c,\"resolution\");Cq(c,\"language\");if(\"newest\"===a.b&&\"traffic\"!==a.f)for(d in c.maps)c.maps[d].hash&&c.maps[d].newest&&(a.b=c.maps[d].hash,a.dispatchEvent(\"versionupdate\"));a.u=c;a.dispatchEvent(\"infoupdate\")},function(c){throw c;})}\nfunction Dq(a){var b=a.C().clone().F(\"copyright\").F(a.oc()).I({output:\"json\"});a.c&&b.za(a.c[0]);a.j=1;a.G(b,function(c){a.j=2;aq(a.m,c);a.dispatchEvent(\"copyrightupdate\")},function(c){a.j=-1;throw c;})}Aq.prototype.Be=function(){return this.u};Aq.prototype.getInfo=Aq.prototype.Be;\nAq.prototype.qe=function(a,b,c,d,e,f){var g=this.C().clone().F(a+\"/\"+this.oc()+\"/\"+b+\"/\"+c+\"/\"+d).I(e?e:{}).toString();var h=0,k,l=g.length;if(0!==l)for(k=0;k<l;k++){var m=g.charCodeAt(k);h=(h<<5)-h+m;h|=0}g=h;h=this.s[g];h||(h=new zq(this,a,b,c,d,e,qp({headers:this.g},f||{})),this.s[g]=h);return h};Aq.prototype.createTileProvider=Aq.prototype.qe;Aq.prototype.ic=function(a,b,c,d,e,f,g,h){a=this.qe(a,b,c,d,e,h);return new ql(a,{opacity:f,dark:!!g})};Aq.prototype.createTileLayer=Aq.prototype.ic;\nW.prototype.$g=function(a){return this.Ma(Aq,a)};W.prototype.getMapTileService=W.prototype.$g;function Eq(a){Eq.l.constructor.call(this,Eq,a)}u(Eq,Rp);t(\"H.service.publicTransit.Service\",Eq);Eq.prototype.Ia=function(){return{subDomain:\"transit.router\",path:\"v8\"}};Eq.CONFIG_KEY=\"publicTransit\";Eq.prototype.Lm=function(a,b,c){a=this.C().clone().F(\"routes\").I(a);return this.G(a,b,c)};Eq.prototype.getRoutes=Eq.prototype.Lm;Eq.prototype.Xl=function(a,b,c){a=this.C().clone().F(\"departures\").I(a);return this.G(a,b,c)};Eq.prototype.getDepartures=Eq.prototype.Xl;\nEq.prototype.Pm=function(a,b,c){a=this.C().clone().F(\"stations\").I(a);return this.G(a,b,c)};Eq.prototype.getStations=Eq.prototype.Pm;Eq.prototype.a=function(a){return Error(JSON.stringify(a))};W.prototype.Gm=function(a){return this.Ma(Eq,a)};W.prototype.getPublicTransitService=W.prototype.Gm;function Fq(a){Fq.l.constructor.call(this,Fq,a);rp(Fq,\"Use HERE Routing API v8 instead.\")}u(Fq,Rp);t(\"H.service.RoutingService\",Fq);Fq.prototype.Ia=function(){return{subDomain:\"route.ls\",path:\"routing/7.2\"}};Fq.prototype.a=function(a){return Error(a.details)};Fq.CONFIG_KEY=\"routing\";Fq.prototype.zd=function(a,b,c){a=this.C().clone().F(\"calculateroute.json\").I(a);return this.G(a,b,c)};Fq.prototype.calculateRoute=Fq.prototype.zd;\nFq.prototype.Fg=function(a,b,c){a=this.C().clone().za(\"isoline\").F(\"calculateisoline.json\").I(a);return this.G(a,b,c)};Fq.prototype.calculateIsoline=Fq.prototype.Fg;function Gq(a){Gq.l.constructor.call(this,Gq,a)}u(Gq,Rp);t(\"H.service.RoutingService8\",Gq);Gq.CONFIG_KEY=\"routing_v8\";Gq.prototype.Ia=function(){return{subDomain:\"router\",path:\"v8/routes\"}};Gq.prototype.a=function(a){return Error(a.error)};Gq.prototype.zd=function(a,b,c){a=this.C().clone().I(a);return this.G(a,b,c)};Gq.prototype.calculateRoute=Gq.prototype.zd;Gq.prototype.Fg=function(a,b,c){a=this.C().clone().za(\"isoline\").td(\"v8/isolines\").I(a);return this.G(a,b,c)};\nGq.prototype.calculateIsoline=Gq.prototype.Fg;W.prototype.Bj=function(a,b){b=lo?8:+b||7;if(7===b)b=Fq;else if(8===b)b=Gq;else throw new D(this.Bj,1,\"allowed values are 7 and 8\");return this.Ma(b,a)};W.prototype.getRoutingService=W.prototype.Bj;function Hq(){}t(\"H.service.extension.dataView.ITable\",Hq);Hq.prototype.Kd=function(){};Hq.prototype.getMeta=Hq.prototype.Kd;Hq.prototype.Nd=function(){};Hq.prototype.getRowCount=Hq.prototype.Nd;Hq.prototype.nc=function(){};Hq.prototype.getRow=Hq.prototype.nc;Hq.prototype.Oa=function(){};Hq.prototype.getColumnNames=Hq.prototype.Oa;Hq.prototype.xe=function(){};Hq.prototype.getColumn=Hq.prototype.xe;Hq.prototype.sa=function(){};Hq.prototype.getCell=Hq.prototype.sa;Hq.prototype.concat=function(){};\nHq.prototype.concat=Hq.prototype.concat;function Iq(){}t(\"H.service.extension.dataView.IRow\",Iq);Iq.prototype.Oa=function(){};Iq.prototype.getColumnNames=Iq.prototype.Oa;Iq.prototype.sa=function(){};Iq.prototype.getCell=Iq.prototype.sa;Iq.prototype.gd=function(){};Iq.prototype.getTable=Iq.prototype.gd;function Jq(a,b){this.a=a;this.b=b}t(\"H.service.extension.dataView.ObjRow\",Jq);Jq.prototype.Oa=function(){return this.a.Oa()};Jq.prototype.getColumnNames=Jq.prototype.Oa;Jq.prototype.sa=function(a){return this.a.sa(this.b,a)};Jq.prototype.getCell=Jq.prototype.sa;Jq.prototype.gd=function(){return this.a};Jq.prototype.getTable=Jq.prototype.gd;function Kq(){}t(\"H.service.extension.dataView.IColumn\",Kq);Kq.prototype.sa=function(){};Kq.prototype.getCell=Kq.prototype.sa;function Lq(a,b){this.b=a;this.a=b}t(\"H.service.extension.dataView.ObjColumn\",Lq);Lq.prototype.sa=function(a){return this.b.sa(a,this.a)};Lq.prototype.getCell=Lq.prototype.sa;function Mq(a,b,c){var d;b=b||(a&&a.length?Object.keys(a[0]):B);this.vb=a;if(b)for(this.Ad=b,this.Hg=a=oc(),d=b.length;d--;)a[b[d]]=!0;c!==B&&(this.Ih=c)}t(\"H.service.extension.dataView.ObjTable\",Mq);p=Mq.prototype;p.Ih=B;p.vb=B;p.Ad=B;p.Hg=B;p.Kd=function(){return this.Ih};Mq.prototype.getMeta=Mq.prototype.Kd;Mq.prototype.Nd=function(){return this.vb?this.vb.length:0};Mq.prototype.getRowCount=Mq.prototype.Nd;Mq.prototype.nc=function(a){var b=this.vb;return b&&b[a]?new Jq(this,a):B};\nMq.prototype.getRow=Mq.prototype.nc;Mq.prototype.Oa=function(){return this.Ad||jf};Mq.prototype.getColumnNames=Mq.prototype.Oa;Mq.prototype.xe=function(a){return this.Hg[a]?new Lq(this,a):B};Mq.prototype.getColumn=Mq.prototype.xe;Mq.prototype.sa=function(a,b){var c=this.vb;return(a=c&&this.Hg[b]&&c[a])&&a[b]};Mq.prototype.getCell=Mq.prototype.sa;\nMq.prototype.concat=function(){var a=arguments.length,b,c=this.Ad,d=\"\"+this.Ad,e=(this.vb||[]).slice();for(b=0;b<a;b++){var f=arguments[b];if(!(f instanceof Mq))throw new D(this.concat,b);if(f.vb){if(c&&\"\"+f.Ad!==d)throw new D(this.concat,b,\"Incompatible columns!\");e=e.concat(f.vb)}}return new Mq(e,this.Ad,this.Ih)};Mq.prototype.concat=Mq.prototype.concat;function Nq(a,b){a.vb?a.vb.push(b):a.vb=[b];return a.vb.length-1};function Oq(a){var b=Pq;if(!a||!Bc(bf(a.layerId,a.layer))||!Ec(a.level)||vc(a.rowFilter)&&!Da(a.rowFilter)||vc(a.rowFilterContext)&&!Ea(a.rowFilterContext))throw new D(b,1,vc(\"invalid layer config\")?\"invalid layer config\":a);};function Qq(a,b,c,d){d=d||Rq;this.a={};d.provider=a;this.invalidate=hf;Qq.l.constructor.call(this,b,d);delete this.invalidate;c&&(this.b=c);this.pa(lh.ADD)}u(Qq,Eh);t(\"H.service.remote.Spatial\",Qq);var Rq={};Qq.prototype.$a=function(){return this.b||Eh.prototype.$a.call(this)};Qq.prototype.getId=Qq.prototype.$a;Qq.prototype.eg=kd;Qq.prototype.retain=Qq.prototype.eg;Qq.prototype.release=gf;Qq.prototype.release=Qq.prototype.release;function Sq(a,b){this.a=a;b&&(this.b=b)}var Tq=new Sq(jf);\nQq.prototype.Id=function(a){return(this.a[a.key]||Tq).a};Qq.prototype.getGeometriesForTile=Qq.prototype.Id;Qq.prototype.Yg=function(a){return(this.a[a.key]||Tq).b};Qq.prototype.getLabels=Qq.prototype.Yg;function Uq(a,b,c){a.a[b.key]=new Sq(c,void 0)};function Vq(a,b,c,d){if(!Da(c))throw new D(a,b,\"has invalid type\");if(!Da(d))throw new D(a,b+1,\"has invalid type\");};function Wq(a,b,c){var d=8===a;this.b=b;this.c=c||kd;(this.a=4===a||d)?this.j=d:this.g=1===a;this.f=this.a?\"$HProjGeometry\":\"geometry\"}\nWq.prototype.parse=function(a,b,c){var d,e,f={},g=[],h,k;var l=0;for(h=c.length;l<h;l++){var m=c[l];var n=m.Rows;if(m=n.length){var q=Object.keys(n[0]).filter(function(v){return\"geometry\"!==v&&\"$HProjGeometry\"!==v});q=new Mq(n,q);for(k=0;k<m;k++){var r=n[k];if(e=r[this.f]){if(delete r[this.f],r=q.nc(k))try{this.a?d=Xq(this,a,b,r,e):d=Yq(this,a,r,e.path),d.ia(a),g.push(d)}catch(v){this.c(v.message)}}else this.c(\"Layer must contain geometries\")}}}f[this.a?\"spatials\":this.g?\"markers\":\"domMarkers\"]=\ng;return f};function Xq(a,b,c,d,e){var f=[],g=e.paths,h=g.length,k=0,l=a.b&&a.b(d);for(a=new Qq(b,a.j,B,{style:l||a.i,data:d});k!==h;)f.push(Zq(g[k++]));Uq(a,c,[new Mh(f,e.interiorsIndex,e.outlinesIndex)]);return a}function Yq(a,b,c,d){d=new mg(d[0],d[1]);var e=a.b&&a.b(c);a.g?(a={icon:e,data:c,provider:b},a=new Jn(d,a)):(a={icon:e,data:c,provider:b},a=new $i(d,a));return a}function Zq(a){for(var b=0,c=a.length,d=[];b<c;)d.push(new G(a[b++],a[b++]));return d};function $q(a,b){var c={};this.b=a;Ya(c,b||c);mk.call(this,c);this.Zf={};a=this.Eb(oh.SPATIAL);a.update(a.a+1,lh.ADD)}u($q,mk);t(\"H.service.remote.ObjectProvider\",$q);$q.prototype.D=function(){mk.prototype.D.call(this)};$q.prototype.dispose=$q.prototype.D;$q.prototype.xc=function(){return jf};$q.prototype.requestMarkers=$q.prototype.xc;$q.prototype.wc=function(){return jf};$q.prototype.requestDomMarkers=$q.prototype.wc;$q.prototype.pd=function(){return jf};$q.prototype.requestOverlays=$q.prototype.pd;\n$q.prototype.Kb=gf;$q.prototype.providesMarkers=$q.prototype.Kb;$q.prototype.Jb=gf;$q.prototype.providesDomMarkers=$q.prototype.Jb;$q.prototype.vc=gf;$q.prototype.providesSpatials=$q.prototype.vc;$q.prototype.ag=function(){return jf};$q.prototype.requestSpatials=$q.prototype.ag;function ar(a){return a.pc(!0)}$q.prototype.bg=function(a,b){a=br(this,a,cr);b&&(a=a.filter(ar));return a};$q.prototype.requestSpatialsByTile=$q.prototype.bg;\nfunction br(a,b,c){var d=b.j&&b.j[c],e;!d&&(e=b.m)&&(delete b.m,(b.j=a=a.b.parse(a,b,e))&&(d=a[c]));return d||jf}$q.prototype.aa=function(a){var b=a.$a();if(this.Zf[b])throw new Zc(this.aa,\"Remote object \"+b+\" already added\");return this.Zf[b]=a};$q.prototype.Da=function(a){delete this.Zf[a.$a()]};var cr=\"spatials\";function dr(a){a=a||{};var b=a.tileCacheSize||1024,c=a.resultType,d=a.styleCallback;vc(a.min)||(a.min=12);dr.l.constructor.call(this,a);if(-1===er.indexOf(c))throw new D(dr,2,\"invalid resultType\");this.b=c;if(d&&!Da(d))throw new D(dr,2,\"invalid style callback\");this.Y=d;this.X=a.pixelRatio||Ue();this.zb=z(this.zb,this);this.s(new Pk(b,z(this.Ya,this)));this.createTileInternal=4===c||8===c?z(this.N,this):z(this.K,this)}u(dr,S);t(\"H.service.extension.TileProvider\",dr);dr.prototype.i=!1;\ndr.prototype.getCapabilities=function(){return dr.l.getCapabilities.call(this)|Oj.CROP_LINES_BY_TILE|Oj.CROP_POLYGONS_BY_TILE};dr.prototype.Qa=function(a,b,c,d){return this.i?dr.l.Qa.call(this,a,b,c,d):B};dr.prototype.requestTile=dr.prototype.Qa;dr.prototype.zb=function(a){this.dispatchEvent(new vd(\"error\",Bc(a)?a:a+\"\",this))};dr.prototype.Kb=function(){return 1===this.b};dr.prototype.providesMarkers=dr.prototype.Kb;dr.prototype.Jb=function(){return 2===this.b};dr.prototype.providesDomMarkers=dr.prototype.Jb;\ndr.prototype.vc=function(){return 4===this.b||8===this.b};dr.prototype.providesSpatials=dr.prototype.vc;function fr(a){var b=a.ua;b||(a.v||(a.v=a.u(a.b,a.Y,a.zb)),b=a.ua=new $q(a.v),b.ia(a),b.addEventListener(a.A.xa,z(a.ya,a)),b.ua=!0);return b}\ndr.prototype.K=function(a,b,c,d){var e=this.getTileKey(a,b,c);e=this.Db().get(e);var f=2==this.b,g=[],h=fr(this);e?e.valid=!0:(a=e=new Vk(a,b,c,y),delete a.j,a.m=d);d=f?br(h,e,\"domMarkers\"):br(h,e,\"markers\");for(b=d.length;b--;)a=d[b],a.yi=e,(f||1===a.qb().getState())&&g.push(a);e.data=g;return e};dr.prototype.ya=function(a){if(a=a.target.yi)a.valid=!1};dr.prototype.jo=function(a){this.B=!!a};dr.prototype.setTileCanvasRendering=dr.prototype.jo;dr.prototype.B=!0;\ndr.prototype.N=function(a,b,c,d){var e=fr(this),f=this.getTileKey(a,b,c),g=this.tileSize,h=this.Db().get(f);h||(a=h=new Zk(f,a,b,c,g,this.X,c,e),delete a.j,a.m=d);this.B?(d=up.pop(g),h.T(d)||up.push(d,g)):el(h);return h};dr.prototype.Ya=function(a,b){var c;if(4===this.b||8===this.b){a=b.Pa();for(c=a.length;c--;)delete a[c].a[b.key];if(a=b.Xf())up.push(a,this.tileSize),b.Yf()}else for(a=b.data,c=a.length;c--;)delete a[c].yi};dr.prototype.o=function(){dr.l.o.call(this);fr(this).D()};\nvar gr={MARKER:1,DOM_MARKER:2,POLYLINE:4,POLYGON:8};dr.ResultType=gr;var er=[1,2,4,8];function Pq(a,b,c){var d=this,e=b&&b.rowFilter,f=c.resultType;Pq.l.constructor.call(this,c);C(a,hr,Pq,0);Oq(b);e?(c=Wa(b),c.rowFilter=e.toString()):c=Wa(b);delete c.layer;c.layerId=bf(b.layerId,b.layer);(new Qf).a(\"pde\",\"H.service.extension.worker.processor\");a=a.C().clone().F(ir+\".\"+jr).I({meta:1});(new Tf(\"pde\",{message:[this.uid,0,{tileSize:this.tileSize,projected:!0,onlyOutline:4===f,serverUrl:a.toString(),layerConfigs:[c],horizontalMargin:1}]})).then(function(){d.i=!0;d.Sa()},this.zb)}\nu(Pq,dr);t(\"H.service.extension.platformData.TileProvider\",Pq);Pq.prototype.u=function(a,b,c){a=new Wq(a,b,c);a.i=kr;return a};var kr=new O({strokeColor:\"transparent\",fillColor:\"transparent\",lineWidth:0,lineJoin:\"round\",lineCap:\"round\"});\nPq.prototype.G=function(a,b,c,d,e){var f=this,g=this.getTileKey(a,b,c),h;g=this.Db().get(g);var k={cancel:kd},l=!0,m=this.b;g&&(4===m||8===m?g.Sd()||(d(up.pop(this.tileSize),null),l=!1):(d(y),l=!1));if(l){var n=sp.setTimeout(function(){h=new Tf(\"pde\",{message:[f.uid,1,[a,b,c]]});h.then(d,e)},500);k.cancel=function(){h?h.cancel():sp.clearTimeout(n)}}return k};Pq.prototype.requestInternal=Pq.prototype.G;Pq.prototype.o=function(){Pq.l.o.call(this);new Tf(\"pde\",{message:[this.uid,3]})};\nPq.ResultType=gr;function lr(a,b,c,d,e,f){Vq(lr,1,b,c);Vq(lr,2,d,e);(this.f=a.length)?(this.R=a,this.s=b,this.i=c,this.b=0,this.c=z(this.c,this),this.m=d,this.j=e,this.a=oc(),Ya(this.a,mr,f||{}),this.g={},x.setTimeout(this.c,0)):b(jf,!0)}var mr={duration:100,Jl:\"geometry\",Il:\"WKT\",co:\"searchAttributes\",Yi:B};\nlr.prototype.c=function(){var a=[];var b=!1;for(var c=Jk(),d;this.b<this.f;){var e=this.R[this.b];b=e.attributes;d=e.layerId||this.a.Yi;e.distance&&(b[this.a.co]={nearest:new mg(e.nearestLat,e.nearestLon),distance:e.distance});if(e=e[this.a.Jl]){try{var f=On(new io(e))}catch(g){this.i(new x.Error(g.message));b=!0;break}b[this.a.Il]=f}(e=this.g[d])||(e=this.g[d]=this.m({layerId:d,columnNames:Object.keys(b)}));b=this.j(e,b);a.push(b);this.b++;if((b=this.b===this.f)||Jk()-c>=this.a.duration){this.s(a,\nb);break}}b?this.g={}:this.u=x.setTimeout(this.c,0)};lr.prototype.cancel=function(){x.clearTimeout(this.u);this.b<this.f&&this.i(new x.Error(\"parsing canceled\"))};lr.prototype.cancel=lr.prototype.cancel;function nr(a){this.a=a}nr.prototype.cancel=function(){for(var a=this.a,b=a.length;b--;)a[b].cancel();a.length=0};nr.prototype.cancel=nr.prototype.cancel;function hr(a){hr.l.constructor.call(this,hr,a)}u(hr,Rp);t(\"H.service.extension.platformData.Service\",hr);hr.prototype.Ia=function(){return{subDomain:\"s.fleet.ls\",path:\"1\"}};hr.CONFIG_KEY=\"platformData\";\nhr.prototype.request=function(a,b,c,d,e){var f=\"text/plain\";if(!a)throw new D(this.request,0,a);if(!b)throw new D(this.request,1,b);if(!d)throw new D(this.request,3,d);if(!e)throw new D(this.request,4,e);a=this.C().clone().F(a+\".\"+b).I(c);b===or.JSON&&(f=\"application/json\");return this.G(a,d,e,f)};hr.prototype.request=hr.prototype.request;var ir=\"tiles\";\nhr.EntryPoint={DOC_ATTRIBUTES:\"doc/attributes\",DOC_LAYER:\"doc/layer\",DOC_LAYERS:\"doc/layers\",DOC_MAPS:\"doc/maps\",DOC_INDEXES:\"doc/indexes\",SEARCH_BBOX:\"search/bbox\",SEARCH_CORRIDOR:\"search/corridor\",SEARCH_PROXIMITY:\"search/proximity\",SEARCH_QUADKEY:\"search/quadkey\",SERVICE_CONFIGURATION:\"serviceconfiguration\",STATIC:\"static\",TILE:\"tile\",TILES:ir,FILE:\"file\",INDEX:\"index\"};var jr=\"json\",or={TXT:\"txt\",JSON:jr,HTML:\"html\",BIN:\"bin\"};hr.EntryPointType=or;\nhr.prototype.ic=function(a,b){var c=b&&b.resultType;a=new Pq(this,a,b);var d;1==c||2===c?d=new Kn(a):d=new ql(a);return d};hr.prototype.createTileLayer=hr.prototype.ic;function pr(a,b,c,d,e){var f=[],g,h=c.layer_id||c.layer_ids;a=a.request(b,jr,c,function(k){g=new lr(k.geometries,d,e,function(l){return new Mq([],l.columnNames,l)},function(l,m){return l.nc(Nq(l,m))},{Yi:h});f.push(g)},function(k){e(new x.Error(k))});f.push(a);return new nr(f)}\nfunction qr(a,b,c){if(!Ac(a))throw new D(c,0,\"has invalid type\");if(!Ac(b))throw new D(c,1,\"has invalid type\");if(a.length!==b.length||!a.length)throw new D(c,1,\"specify one key attribute for each given layer id in the same order\");}\nhr.prototype.yc=function(a,b,c,d,e,f){function g(l,m){m&&h--;d(l,!h)}var h,k=[];qr(a,b,this.yc);Vq(this.yc,3,d,e);C(c,K,this.yc,2);c={bbox:c.c+\",\"+c.a+\";\"+c.f+\",\"+c.b};f&&Ya(c,f);a=c.layer_id?[c.layer_id]:a;f=0;for(h=a.length;f<h;f++)c.layer_id=a[f],c.key_attribute=b[f],k.push(pr(this,\"search/bbox\",c,g,e));return new nr(k)};hr.prototype.searchByBoundingBox=hr.prototype.yc;\nhr.prototype.Mb=function(a,b,c,d,e,f,g){qr(a,b,this.Mb);C(c,mg,this.Mb,2,\"has invalid type\");if(!Ec(d))throw new D(this.Mb,3,\"has invalid type\");Vq(this.Mb,4,e,f);a={layer_ids:a.join(\",\"),key_attributes:b.join(\",\"),proximity:c.lat+\",\"+c.lng+\",\"+d};g&&Ya(a,g);return pr(this,\"search/proximity\",a,e,f)};hr.prototype.searchByProximity=hr.prototype.Mb;\nhr.prototype.Lb=function(a,b,c,d,e,f,g){var h=\"\";qr(a,b,this.Lb);if(!Bc(c)&&!C(c,L))throw new D(this.Lb,1,\"has invalid type\");if(!Ec(d))throw new D(this.Lb,2,\"has invalid type\");Vq(this.Lb,4,e,f);a={layer_ids:a.join(\",\"),key_attributes:b.join(\",\"),radius:d};if(Bc(c))a.route_id=c;else{d=c.W;c=0;for(b=d.length;c<b;c+=3)h+=d[c]+\",\"+d[c+1],c<b-3&&(h+=\";\");a.corridor=h}g&&Ya(a,g);return pr(this,\"search/corridor\",a,e,f)};hr.prototype.searchByCorridor=hr.prototype.Lb;\nW.prototype.Aj=function(a){rp(W.prototype.Aj);return this.Ma(hr,a)};W.prototype.getPlatformDataService=W.prototype.Aj;function rr(a){rr.l.constructor.call(this,rr,a)}u(rr,Rp);t(\"H.service.extension.geofencing.Service\",rr);rr.prototype.Ia=function(){return{subDomain:\"fleet.ls\",path:\"2\"}};rr.CONFIG_KEY=\"geofencing\";rr.prototype.request=function(a,b,c,d){if(!a)throw new D(this.request,0,a);if(!Da(c))throw new TypeError(\"onResult must be a function\");if(!Da(d))throw new TypeError(\"onError must be a function\");a=this.C().clone().F(a+\".json\").I(b);return this.G(a,c,d)};rr.prototype.request=rr.prototype.request;\nrr.prototype.a=function(a){return Error(a.issues&&a.issues.length?a.issues.map(function(b){return b.message}).join(\". \"):a.message||a.response_code)};rr.EntryPoint={SEARCH_PROXIMITY:\"search/proximity\"};W.prototype.rj=function(a){rp(W.prototype.rj);return this.Ma(rr,a)};W.prototype.getGeofencingService=W.prototype.rj;t(\"H.service.extension.customLocation.Permission\",{READ:\"read\",WRITE:\"write\",EXPORT:\"export\"});t(\"H.service.extension.customLocation.Storage\",{READONLY:\"readonly\",UPDATABLE:\"updatable\"});function sr(a){var b=tr;if(!a||!Bc(a.layerId)||vc(a.rowFilter)&&!Da(a.rowFilter)||vc(a.rowFilterContext)&&!Ea(a.rowFilterContext))throw new D(b,1,vc(\"invalid layer config\")?\"invalid layer config\":a);}function ur(a){return Bc(a)&&/^[A-Z][A-Z0-9_]*$/.test(a)}function vr(a){for(var b=a&&a.length,c=2<=b&&\"WKT\"===a[--b]&&\"GEOMETRY_ID\"===a[--b];c&&b--;)c=ur(a[b]);return c}\nfunction wr(a,b){var c=\"\",d=[];if(b){var e=a.geometries;if(e&&e.length){var f=Object.keys(e[0].attributes);c=c+(\"Meta:\\t\"+b+\"\\n\")+f.join(\"\\t\");c+=\"\\tWKT\\n\";for(a=0;a<e.length;a++){var g=e[a].attributes;var h=e[a].geometry;for(b=0;b<f.length;b++)d.push(g[f[b]]);c+=d.join(\"\\t\");c+=\"\\t\"+h+\"\\n\";d=[]}}}else{h={};d=[];if(a.geometries)for(e=0;e<a.geometries.length;e++)b=a.geometries[e],h[b.layerId]||(h[b.layerId]=[]),h[b.layerId].push(b);for(f in h)d.push({layerId:f,geometries:h[f]});for(a=0;a<d.length;a++)c+=\nwr(d[a],d[a].layerId)}return c};function tr(a,b,c){var d=this,e=b&&b.rowFilter,f;tr.l.constructor.call(this,c);C(a,xr,tr,0);var g=c.resultType;sr(b);if(e){var h=Wa(b);h.rowFilter=e.toString()}else h=b;(new Qf).a(\"cle\",\"H.service.extension.worker.processor\");var k=b.layerId;a.request(yr,zr,{detail_level:\"all\",layer_id:k},function(l){l=l.layers;var m;for(m=0;m<l.length;m++)if(l[m].layerId===k){h.level=l[m].level;break}f=a.C().clone().F(Ar+\".\"+zr).I({meta:1});(new Tf(\"cle\",{message:[d.uid,0,{tileSize:d.tileSize,projected:!0,onlyOutline:4===\ng,serverUrl:f.toString(),layerConfigs:[h],batchTiles:!1,horizontalMargin:1}]})).then(function(){d.i=!0;d.Sa()},d.zb)},function(l){d.zb(l.message)})}u(tr,dr);t(\"H.service.extension.customLocation.TileProvider\",tr);tr.prototype.u=function(a,b,c){return new Wq(a,b,c)};\ntr.prototype.G=function(a,b,c,d,e){var f=this,g=this.getTileKey(a,b,c),h;g=this.Db().get(g);var k={cancel:kd},l=!0,m=this.b;g&&(4===m||8===m?g.Sd()||(d(up.pop(this.tileSize),null),l=!1):(d(y),l=!1));if(l){var n=sp.setTimeout(function(){h=new Tf(\"cle\",{message:[f.uid,1,[a,b,c]]});h.then(d,e)},500);k.cancel=function(){h?h.cancel():sp.clearTimeout(n)}}return k};tr.prototype.requestInternal=tr.prototype.G;tr.prototype.o=function(){tr.l.o.call(this);new Tf(\"cle\",{message:[this.uid,3]})};function Br(){if(Cr)throw new Zc(Br);}t(\"H.service.extension.customLocation.Table\",Br);var Cr=!0;function Dr(a,b){var c;Cr=!1;var d=new Br;Cr=!0;d.c=rc(x.JSON.parse(x.JSON.stringify(a)));a=a.columnNames;var e=oc();for(c=a.length;c--;)e[a[c]]=c;d.f=e;d.b=a.length;if(b){if(b.length%a.length)throw new D(Dr,1,\"Invalid number of cells\");}else b=[];d.a=b;return d}Br.prototype.Kd=function(){return this.c};Br.prototype.getMeta=Br.prototype.Kd;Br.prototype.Nd=function(){return this.a.length/this.b};\nBr.prototype.getRowCount=Br.prototype.Nd;Br.prototype.nc=function(a){return a<this.a.length/this.b?new Er(this,a):B};Br.prototype.getRow=Br.prototype.nc;Br.prototype.Mm=function(){var a=this.a.length/this.b,b,c=new x.Array(a);for(b=0;b<a;b++)c[b]=new Er(this,b);return c};Br.prototype.getRows=Br.prototype.Mm;Br.prototype.zg=function(a){var b=this.b,c=this.a,d=c.length/this.b;if(!a||a.length%b)throw new D(this.zg,0,\"Invalid number of cells\");this.a=c.concat(a);return d};Br.prototype.addCells=Br.prototype.zg;\nBr.prototype.nl=function(){for(var a=this.b,b=this.a,c=this.a.length/this.b;a--;)b.push(y);return this.nc(c)};Br.prototype.addRow=Br.prototype.nl;Br.prototype.Oa=function(){return this.c.columnNames};Br.prototype.getColumnNames=Br.prototype.Oa;Br.prototype.xe=function(a){return this.f[a]===B?B:new Fr(this,a)};Br.prototype.getColumn=Br.prototype.xe;Br.prototype.sa=function(a,b){return this.a[a*this.b+this.f[b]]};Br.prototype.getCell=Br.prototype.sa;\nBr.prototype.zc=function(a,b,c){b=this.f[b];if(a>=this.a.length/this.b)throw new D(this.zc,0,\"Row index out of bounds\");if(b===B)throw new D(this.zc,0,\"Column unknown\");this.a[a*this.b+b]=c};Br.prototype.setCell=Br.prototype.zc;\nBr.prototype.concat=function(a){var b=arguments.length,c,d=\"\"+this.Oa(),e=this.a?this.a.slice():[];for(c=0;c<b;c++){var f=arguments[c];if(!(f instanceof Br))throw new D(this.concat,c);if(\"\"+f.Oa()!==d)throw new D(this.concat,c,\"Incompatible columns!\");f.a&&(e=e.concat(f.a))}return Dr(this.c,e)};Br.prototype.concat=Br.prototype.concat;var Gr=/(\\n|\\t|\\r|\")/;\nBr.prototype.wi=function(a,b){var c,d=this.b,e=this.Oa(),f=[],g=[],h=this.a,k=-1;for(c=0;c<d;c++)if(!a||a.test(e[c]))\"WKT\"===e[c]&&(k=f.length),f.push(c);if(!(a=f.length))throw new D(this.wi,1,\"No columns filtered\");Hr(this,g,e,0,d,f,a,k);if(b){var l=b.length;for(c=0;c<l;c++)g.push(\"\\n\"),e=b[c],Hr(this,g,h,e,d,f,a,k)}else for(l=this.Nd(),e=0;e<l;e++)g.push(\"\\n\"),Hr(this,g,h,e,d,f,a,k);return g.join(\"\")};\nfunction Hr(a,b,c,d,e,f,g,h){var k;for(k=0;k<g;k++){k&&b.push(\"\\t\");var l=c[d*e+f[k]];if(k!==h){if(l!==y){l=String(l);if(Gr.test(l))throw new D(a.wi,0,'Invalid character (\\\\n, \\\\r, \\\\t, or \") in row '+d+\" column \"+a.c.columnNames[f[k]]);b.push(l)}}else b.push(l)}}function Fr(a,b){this.b=a;this.a=b}Br.Column=Fr;Fr.prototype.sa=function(a){return this.b.sa(a,this.a)};Fr.prototype.getCell=Fr.prototype.sa;Fr.prototype.zc=function(a,b){this.b.zc(a,this.a,b)};Fr.prototype.setCell=Fr.prototype.zc;\nfunction Er(a,b){this.a=a;this.Dh=b}Br.Row=Er;Er.prototype.Oa=function(){return this.a.Oa()};Er.prototype.getColumnNames=Er.prototype.Oa;Er.prototype.sa=function(a){return this.a.sa(this.Dh,a)};Er.prototype.getCell=Er.prototype.sa;Er.prototype.zc=function(a,b){this.a.zc(this.Dh,a,b)};Er.prototype.setCell=Er.prototype.zc;Er.prototype.gd=function(){return this.a};Er.prototype.getTable=Er.prototype.gd;function Ir(a){if(a===B)a=\"\\t\";else if(!/^[^\"\\r\\n]$/.test(a))throw new D(Ir,0);this.c=String(a).charCodeAt(0);this.Eh=z(this.Eh,this);this.a=Jr}var Jr=0;p=Ir.prototype;p.getState=function(){return this.a};function Kr(a,b,c){var d=a.a;if(d!==b)throw 1===d&&(a.a=Jr),new Zc(c,\"Requires state: \"+[\"READY\",\"PARSE\",\"PAUSE\"][b]+\" but found \"+[\"READY\",\"PARSE\",\"PAUSE\"][d]);}p.abort=function(){Kr(this,2,Ir.prototype.abort);this.a=Jr};\np.Eh=function(a){this.a=Jr;throw new D(Ir.prototype.parse,0,\"Malformed DSV at row \"+this.b.j+\" column \"+this.b.b+\": \"+a);};function Lr(a,b){var c=[];a.parse(b,function(d,e,f){1>d&&(c[e]=f);return 0<d});a.a=Jr;return c}p.parse=function(a,b,c){Kr(this,Jr,Ir.prototype.parse);a=a.trim();this.b=new Mr(a,this.c,this.Eh);this.f=b;this.kk=c||hf;this.a=2;this.Fh()};p.kk=hf;\np.Fh=function(){var a=this.b,b=[];Kr(this,2,Ir.prototype.Fh);this.a=1;do{if(!a.g){this.a=Jr;break}if(e>a.b){if(void 0!==c&&c!==e){this.b.a(\"The number of columns must be the same for all rows\");return}var c=e}var d=a.j;var e=a.b;var f=a.mf;var g=this.kk(d,e,a);if(a.mf>f)for(;-1!==a.next(););else{for(;-1!==(f=a.next());)b.push(f);g=String.fromCharCode.apply(y,b);b.length=0}Nr(a);this.f(d,e,g)&&(this.a=a.g?2:Jr)}while(1===this.a);2!=this.a&&void 0!==c&&0<e&&c!==e&&this.b.a(\"The number of columns must be the same for all rows\")};\nfunction Mr(a,b,c){this.c=new io(a);this.m=b;this.g=!0;this.mf=this.j=this.b=0;Nr(this);this.a=c;this.f=[];this.i=!1}p=Mr.prototype;p.mf=0;function Nr(a){var b=a.c.Ib();a.s=!1;(a.R=34===b)&&a.c.next()}function Or(a,b){var c=a.c;a.s=!0;switch(b){case a.m:a.b++;break;case 13:c.next(),10!==c.Ib()&&a.a(\"CR without LF\");case 10:a.b=0;a.j++;break;case -1:a.g=!1;break;default:a.a(\"End of field expected\")}c.next();return-1}\np.Ib=function(){if(this.s)var a=-1;else{var b=this.c;a=b.Ib();if(this.R)switch(a){case 34:b.next();a=b.Ib();34!==a&&(a=Or(this,a));break;case -1:this.a(\"Closing quotation mark expected\")}else switch(a){case 34:this.a(\"Unexpected quotation mark\");case this.m:case 13:case 10:case -1:a=Or(this,a)}}return a};p.de=function(){this.i=!0;this.f=[]};p.Dd=function(){var a=this.f.slice();this.i=!1;this.f=[];return a};p.next=function(){var a=this.Ib();-1!==a&&this.c.next();this.i&&this.f.push(a);this.mf++;return a};function Pr(a,b,c,d){d=d||{};if(!b)throw new D(Pr,1,\"has to be a function\");if(!c)throw new D(Pr,2,\"has to be a function\");this.m=b;this.u=c;this.a=[];this.g={};this.f=[];this.b={};this.i={};this.j={};this.s={};this.R=d.duration||100;this.c=z(this.c,this);a=a.split(\"Meta:\\t\").slice(1);for(b=0;b<a.length;b++){d=a[b].split(\"\\n\");c=d[0].split(\"\\t\")[0];d=d.slice(1).join(\"\\n\");this.b[c]=new Ir;this.g[c]=Lr(this.b[c],d);var e={layerId:c,columnNames:this.g[c]};this.f.push(c);this.s[c]=Dr(e);this.i[c]=Jk();\nQr(this,d,c);this.c(c)}}function Qr(a,b,c){var d=[],e=a.g[c].length-1,f=a.s[c];try{a.b[c].parse(b,function(g,h,k){var l=!1;0<g&&(d[h]=k,h===e&&(a.a.push(f.nc(f.zg(d))),Jk()-a.i[c]>a.R&&(l=!0)));return l},function(g,h,k){if(0<g&&h===e)return On(k)})}catch(g){a.u(g)}}Pr.prototype.cancel=function(){for(var a in this.j)x.clearTimeout(this.j[a])};Pr.prototype.cancel=Pr.prototype.cancel;\nPr.prototype.c=function(a){var b=this,c,d;this.j[a]=x.setTimeout(function(){if(2===b.b[a].getState())b.i[a]=Jk(),b.m(b.a,!1),b.a=[],b.b[a].Fh(),b.c(a);else{c=!0;for(d=0;d<b.f.length;d++)if(b.b[b.f[d]].getState()!==Jr){c=!1;break}c&&(0<b.a.length&&b.m(b.a,!0),b.a=[])}},0)};function xr(a){xr.l.constructor.call(this,xr,a)}u(xr,Rp);t(\"H.service.extension.customLocation.Service\",xr);xr.prototype.Ia=function(){return{subDomain:\"fleet.ls\",path:\"2\"}};xr.CONFIG_KEY=\"customLocation\";xr.prototype.ic=function(a,b){var c=b&&b.resultType;a=new tr(this,a,b);var d;1===c||2===c?d=new Kn(a):d=new ql(a);return d};xr.prototype.createTileLayer=xr.prototype.ic;\nfunction Rr(a,b,c,d){var e;a=a===Sr?\"changes\":\"file\";var f=b[a],g=Bc(f),h=!g&&C(f,Blob);if(!g&&!h)throw new D(d,0,\"Invalid \"+a+\" parameter\");if(Tr)h?e=f:e=qf(f,\"text/plain\"),d=new x.FormData,d.append(a,e,e.name||a+\".wkt\"),c.method=\"POST\",c.data=d,delete b[a];else if(h)throw new D(d,0,\"Sending Blob data is not supported by the browser\");}var Tr=x.FormData&&!!x.FormData.prototype.append;xr.prototype.request=function(a,b,c,d,e){return Ur(this,a,b,c,d,e)};xr.prototype.request=xr.prototype.request;\nfunction Ur(a,b,c,d,e,f){var g=\"text/plain\",h=b===Vr.LAYERS_UPLOAD||b===Vr.LAYERS_MODIFY||b===Vr.LAYERS_IMPORT,k=d,l={data:B,method:\"GET\",headers:a.g};if(!b)throw new D(a.request,0,b);if(!c)throw new D(a.request,1,c);Vq(a.request,3,e,f);h&&(C(d,Object,a.request,2,\"Invalid request parameters\"),k=Wa(d),Rr(b,k,l,a.request));var m=a.C().clone().F(b+\".\"+c).I(k);c===Wr.JSON&&(g=\"application/json\");a=new uf(g,m.toString(),ie,l);a.then(function(n){var q=n.issues;q&&n.error_id&&n.response_code?f(Error(q[0].message)):\ne(n)},function(n){\"error\"===n.type||404===n.status?f(Error(n.statusText||\"Unable to load data\")):n.json().then(function(q){f(Error(\"[\"+q.issues[0].message+\"] \"+m+\" request failed\"))},function(){f(Error(\"[\"+n.statusText+\"] \"+m+\" request failed\"))})});return a}\nvar yr=\"layers/list\",Sr=\"layers/modify\",Ar=\"tiled/tile\",Vr={LAYERS_DELETE:\"layers/delete\",LAYERS_GRANT:\"layers/access/grant\",LAYERS_LIST:yr,LAYERS_MODIFY:Sr,LAYERS_UPLOAD:\"layers/upload\",LAYERS_IMPORT:\"layers/import\",SEARCH_ALL:\"search/all\",SEARCH_BBOX:\"search/bbox\",SEARCH_CORRIDOR:\"search/corridor\",SEARCH_PROXIMITY:\"search/proximity\",SEARCH_QUADKEY:\"search/quadkey\",SEARCH_TILE:Ar};xr.EntryPoint=Vr;var zr=\"json\",Wr={TXT:\"txt\",JSON:zr};xr.EntryPointType=Wr;\nxr.prototype.ib=function(a,b,c){var d=this;return this.request(\"search/all\",\"txt\",{filter:'WKT==\"\"',layer_id:a},function(e){var f=String(e).replace(/[\\r\\n]+$/g,\"\").split(\"\\t\");d.request(yr,zr,{layer_id:a,detail_level:\"all\"},function(g){g=g.layers[0];g.columnNames=f;b(Dr(g))},c)},c)};xr.prototype.getLayer=xr.prototype.ib;\nxr.prototype.Ij=function(a,b,c,d){function e(){return++g<f?h.request(\"layers/access/grant\",zr,{layer_id:a,granted_app_id:b[g].grantedAppId,permissions:b[g].permissions.join(\",\")},e,d):h.ib(a,c,d)}var f=b&&b.length,g=-1,h=this;return e()};xr.prototype.grantAccess=xr.prototype.Ij;xr.prototype.$i=function(a,b,c){return this.request(\"layers/delete\",zr,{layer_ids:a},b,c)};xr.prototype.deleteLayer=xr.prototype.$i;\nxr.prototype.cd=function(a,b,c){function d(){setTimeout(function(){k.ib(g,function(q){setTimeout(e.bind(null,q),m)},function(){64E3>l?(l+=m,d()):c(x.Error(\"Timeout\"))})},m);m*=2}function e(q){var r=JSON.stringify(q.Oa()),v=a.grants;if(r!==JSON.stringify(h)){var w=\"Results into different column names on the backend: \"+r;setTimeout(function(){k.$i(g,function(){c(x.Error(w))},function(A){c(x.Error(w+\". \"+A.message))})},m)}else v&&v.length?k.Ij(g,v,b,c):b(q)}var f,g,h,k=this,l=0,m=1E3;var n=!a||!ur(g=\na.layerId)&&(f=\"layerId\")||!vr(h=a.columnNames)&&(f=\"columnNames\")?0:Da(b)?Da(c)?-1:2:1;if(0<=n)throw new D(k.cd,n,f||arguments[n]);return k.ib(g,function(){c(x.Error(\"Layer exists already\"))},function(){var q={layer_id:g,file:h.join(\"\\t\")},r=a.level,v=a.storage;r!==B&&(q.level=r);v!==B&&(q.storage=v);k.request(\"layers/upload\",zr,q,d,c)})};xr.prototype.createLayer=xr.prototype.cd;\nfunction Xr(a,b,c,d,e){var f=[],g;a=a.request(b,zr,c,function(h){h.geometries.length?(h=wr(h,c.layer_id),g=new Pr(h,d,e),f.push(g)):d(jf,!0)},e);f.push(a);return new nr(f)}xr.prototype.Mb=function(a,b,c,d,e,f){if(!Ac(a))throw new D(this.Mb,0,\"has invalid type\");C(b,mg,this.Mb,1,\"has invalid type\");if(!Ec(c))throw new D(this.Mb,2,\"has invalid type\");Vq(this.Mb,3,d,e);a={layer_ids:a.join(\",\"),proximity:b.lat+\",\"+b.lng+\",\"+c};f&&Ya(a,f);return Xr(this,\"search/proximity\",a,d,e)};\nxr.prototype.searchByProximity=xr.prototype.Mb;xr.prototype.Lb=function(a,b,c,d,e,f){var g=\"\";if(!Ac(a))throw new D(this.Lb,0,\"has invalid type\");if(!Bc(b)&&!C(b,L))throw new D(this.Lb,1,\"has invalid type\");if(!Ec(c))throw new D(this.Lb,2,\"has invalid type\");Vq(this.Lb,3,d,e);a={layer_ids:a.join(\",\"),radius:c};if(Bc(b))a.route_id=b;else{var h=b.W;b=0;for(c=h.length;b<c;b+=3)g+=h[b]+\",\"+h[b+1],b<c-3&&(g+=\",\");a.corridor=g}f&&Ya(a,f);return Xr(this,\"search/corridor\",a,d,e)};\nxr.prototype.searchByCorridor=xr.prototype.Lb;xr.prototype.yc=function(a,b,c,d,e){function f(k,l){l&&h--;c(k,!h)}var g=[],h;if(!Ac(a))throw new D(this.yc,0,\"has invalid type\");C(b,K,this.yc,1,\"has invalid type\");Vq(this.yc,2,c,d);b={bbox:b.c+\",\"+b.a+\";\"+b.f+\",\"+b.b};e&&Ya(b,e);a=b.layer_id?[b.layer_id]:a;e=0;for(h=a.length;e<h;e++)b.layer_id=a[e],g.push(Xr(this,\"search/bbox\",b,f,d));return new nr(g)};xr.prototype.searchByBoundingBox=xr.prototype.yc;\nxr.prototype.bi=function(a,b,c,d){var e,f=[];if(!Bc(a))throw new D(this.bi,0,\"has invalid type\");Vq(this.bi,1,b,c);var g={layer_id:a};d&&Ya(g,d);d=this.request(\"search/all\",zr,g,function(h){h.geometries.length?(h=wr(h,a),e=new Pr(h,b,c),f.push(e)):b(jf,!0)},c);f.push(d);return new nr(f)};xr.prototype.searchAll=xr.prototype.bi;var Yr={\"delete\":/^GEOMETRY_ID$/,append:/^(?!GEOMETRY_ID$)/};\nfunction Zr(a,b,c,d,e,f){function g(){v++;d(this,v===q)}function h(Y){v++;e(Y,this,v===q)}var k=\"append\"!==b,l,m={},n=oc(),q=0,r=[],v=0;if(!Ac(c))throw new D(f,0,c);Vq(f,1,d,e);for(l=c.length;l--;){var w=c[l];if(C(w,Er)){var A=w.gd().Kd().layerId;var J=w.sa(\"GEOMETRY_ID\");if(k){if(J===y||\"\"===String(J))var I='GEOMETRY_ID must not be null or \"\"';m[J=A+\"_\"+J]&&(I=\"same GEOMETRY_ID for multiple rows\");m[J]=w}else J!==y&&\"\"!==String(J)&&(I='GEOMETRY_ID must be null or \"\"')}else I=\"Invalid type\";if(I)throw new D(f,\n0,\"- Invalid row at index \"+l+\", \"+I);J=n[A];J||(J=n[A]=[],q++);J.push(w)}for(A in n){J=n[A];c=[];for(l=J.length;l--;)c.push(J[l].Dh);r.push(a.request(Sr,zr,{layer_id:A,action:b,changes:J[0].gd().wi(Yr[b]||null,c)},z(g,J),z(h,J)))}return new nr(r)}xr.prototype.Qi=function(a,b,c){return Zr(this,\"append\",a,b,c,this.Qi)};xr.prototype.appendRows=xr.prototype.Qi;xr.prototype.hl=function(a,b,c){return Zr(this,\"update\",a,b,c,this.hl)};xr.prototype.updateRows=xr.prototype.hl;\nxr.prototype.aj=function(a,b,c){return Zr(this,\"delete\",a,b,c,this.aj)};xr.prototype.deleteRows=xr.prototype.aj;W.prototype.lj=function(a){rp(W.prototype.lj);return this.Ma(xr,a)};W.prototype.getCustomLocationService=W.prototype.lj;function $r(a){Yp.l.constructor.call(this,$r,a)}u($r,Rp);t(\"H.service.extension.customRoute.Service\",$r);$r.prototype.Ia=function(){return{subDomain:\"s.fleet.ls\",path:\"2\"}};$r.CONFIG_KEY=\"customRoute\";$r.prototype.a=function(a){return Error(a.issues&&a.issues.length?a.issues.map(function(b){return b.message}).join(\". \"):a)};$r.prototype.zd=function(a,b,c){Vq(this.zd,1,b,c);a=this.C().clone().F(\"calculateroute.json\").I(a);return this.G(a,b,c)};$r.prototype.calculateRoute=$r.prototype.zd;\nW.prototype.mj=function(a){rp(W.prototype.mj);return this.Ma($r,a)};W.prototype.getCustomRoutingService=W.prototype.mj;function as(a){as.l.constructor.call(this,as,a)}u(as,Rp);t(\"H.service.SearchService\",as);as.CONFIG_KEY=\"search\";as.prototype.Ia=function(){return{subDomain:\"search\",path:\"v1\"}};as.prototype.a=function(a){a=[a.title,a.action,a.cause].filter(function(b){return b});return Error(a.join(\". \"))};as.prototype.Rg=function(a,b,c){a=this.C().clone().za(\"geocode\").F(\"geocode\").I(a);return this.G(a,b,c)};as.prototype.geocode=as.prototype.Rg;\nas.prototype.Zh=function(a,b,c){a=this.C().clone().za(\"revgeocode\").F(\"revgeocode\").I(a);return this.G(a,b,c)};as.prototype.reverseGeocode=as.prototype.Zh;as.prototype.rl=function(a,b,c){a=this.C().clone().za(\"autosuggest\").F(\"autosuggest\").I(a);return this.G(a,b,c)};as.prototype.autosuggest=as.prototype.rl;as.prototype.yl=function(a,b,c){a=this.C().clone().za(\"discover\").F(\"discover\").I(a);return this.G(a,b,c)};as.prototype.discover=as.prototype.yl;\nas.prototype.vn=function(a,b,c){a=this.C().clone().za(\"lookup\").F(\"lookup\").I(a);return this.G(a,b,c)};as.prototype.lookup=as.prototype.vn;as.prototype.tl=function(a,b,c){a=this.C().clone().za(\"browse\").F(\"browse\").I(a);return this.G(a,b,c)};as.prototype.browse=as.prototype.tl;W.prototype.Om=function(a){return this.Ma(as,a)};W.prototype.getSearchService=W.prototype.Om;function bs(a){this.c=!!a.toBypassToken;if(!this.c&&!a.token)throw new D(bs,0,'\"token\" must be specified');bs.l.constructor.call(this,bs,a);this.j=a.token;this.f={};this.b={}}u(bs,Rp);t(\"H.service.xyz.Service\",bs);bs.prototype.Ia=function(){return{host:\"xyz.api.here.com\",path:\"hub/spaces\"}};bs.prototype.a=function(a){return Error(a.errorMessage||a.message)};\nbs.prototype.bh=function(a,b,c){yc(a,\"String\",this.bh,0,'\"projectId\" must be a string');cs(this.bh,1,b,c);a=ds(this.C().clone().td(\"project-api/projects/\"+a));return this.G(a,b,c)};bs.prototype.getProject=bs.prototype.bh;bs.prototype.Cj=function(a,b,c){cs(this.Cj,0,a,b);c=es(this,this.C().clone().I(c||{}));return this.G(c,a,b)};bs.prototype.getSpaces=bs.prototype.Cj;\nbs.prototype.Df=function(a,b,c){yc(a,\"String\",this.Df,0,'\"spaceId\" must be a string');cs(this.Df,1,b,c);a=es(this,this.C().clone().F(a));return this.G(a,b,c)};bs.prototype.getSpace=bs.prototype.Df;bs.prototype.Od=function(a,b,c){yc(a,\"String\",this.Od,0,'\"spaceId\" must be a string');cs(this.Od,1,b,c);a=es(this,this.C().clone().F(a+\"/statistics\"));return this.G(a,b,c)};bs.prototype.getStatistics=bs.prototype.Od;\nbs.prototype.yf=function(a,b,c,d,e,f,g){a=es(this,this.C().clone().F(d+\"/tile/web/\"+c+\"_\"+a+\"_\"+b+\".mvtf\").I(Object.assign({clip:!0},g)));return this.G(a,function(h){return h.arrayBuffer().then(e)},f,\"arraybuffer\")};bs.prototype.search=function(a,b,c,d){yc(a,\"String\",this.search,0,'\"spaceId\" must be a string');cs(this.search,1,b,c);a=es(this,this.C().clone().F(a+\"/search\").I(d||{}));return this.G(a,b,c)};bs.prototype.search=bs.prototype.search;\nbs.prototype.Nc=function(a,b,c,d){yc(a,\"String\",this.Nc,0,'\"spaceId\" must be a string');if(!Ea(b))throw new D(this.Nc,1,'\"params\" must be an object');cs(this.Nc,2,c,d);a=es(this,this.C().clone().F(a+\"/features\").I(b));return this.G(a,c,d)};bs.prototype.getFeaturesById=bs.prototype.Nc;\nbs.prototype.Hd=function(a,b,c,d){yc(a,\"String\",this.Hd,0,'\"spaceId\" must be a string');if(!Ea(b))throw new D(this.Nc,1,'\"params\" must be an object');cs(this.Hd,2,c,d);a=es(this,this.C().clone().F(a+\"/bbox\").I(b));return this.G(a,c,d)};bs.prototype.getFeaturesByBoundingBox=bs.prototype.Hd;bs.prototype.ba=function(a){var b=this.f[a];if(b)return b;this.b[a]||fs(this,a);return null};\nbs.prototype.Vc=function(a,b,c,d,e){yc(a,\"String\",this.Vc,0,'\"spaceId\" must be a string');if(!Ea(b))throw new D(this.Vc,1,'\"geojsonObject\" must be an object');cs(this.Vc,2,c,d);if(e&&!Ea(e))throw new D(this.Vc,4,'\"opt_params\" must be an object');return gs(this,a,c,d,\"PUT\",b,e)};bs.prototype.putFeatures=bs.prototype.Vc;\nbs.prototype.Tc=function(a,b,c,d,e){yc(a,\"String\",this.Tc,0,'\"spaceId\" must be a string');if(!Ea(b))throw new D(this.Tc,1,'\"featureCollection\" must be an object');cs(this.Tc,2,c,d);if(e&&!Ea(e))throw new D(this.Tc,4,'\"opt_params\" must be an object');return gs(this,a,c,d,\"POST\",b,e)};bs.prototype.postFeatures=bs.prototype.Tc;\nbs.prototype.dd=function(a,b,c,d){yc(a,\"String\",this.dd,0,'\"spaceId\" must be a string');if(!Ea(b))throw new D(this.dd,1,'\"params\" must be an object');cs(this.dd,2,c,d);return gs(this,a,c,d,\"DELETE\",B,b)};bs.prototype.deleteFeatures=bs.prototype.dd;\nfunction gs(a,b,c,d,e,f,g){var h=Object.assign(a.c?{}:{authorization:\"Bearer \"+a.j},{\"Content-Type\":\"application/geo+json\"},a.g);e={method:e,headers:h};f&&(e.data=JSON.stringify(f));b=ds(a.C().clone().F(b+\"/features\").I(g||{}));f=new uf(\"application/json\",b.toString(),ie,e);f.then(c,Tp(a,b,d));return f}function fs(a,b){a.b[b]=hs;a.Df(b,function(c){a.b[b]=is;a.f[b]=c.copyright;a.dispatchEvent(\"copyrightupdate\")},function(c){a.b[b]=js;throw c;})}\nfunction es(a,b){return a.c?b:ds(b).I({access_token:a.j})}function ds(a){var b=Object.assign({},a.getQuery());delete b.apikey;return a.kg(b)}bs.CONFIG_KEY=\"xyz\";var hs=1,is=2,js=-1;function cs(a,b,c,d){if(!Da(c))throw new D(a,b,'\"onResult\" must be a function');if(!Da(d))throw new D(a,b+1,'\"onError\" must be a function');}W.prototype.Fj=function(a){rp(W.prototype.Fj,\"Use HERE IML service instead.\");return this.Ma(bs,a)};W.prototype.getXYZService=W.prototype.Fj;function ks(a,b,c){var d;ks.l.constructor.call(this,c?{min:c.min,max:c.max,engineType:c.engineType}:void 0);C(a,bs,ks,0);if(!Bc(b))throw new D(ks,1,'\"spaceId\" must be a string');this.u=a;this.b=b;this.i={};if(c&&([\"limit\",\"simplificationLevel\",\"tags\"].forEach(function(e){e in c&&(this.i[e]=c[e])},this),a=c.parameters))for(d in a)this.i[d]=a[d];this.Pb(this.c===ik.WEBGL?new qi({sources:{xyz:{type:\"MVT\"}},layers:{xyz:{data:{source:\"xyz\",layer:this.b},points:{filter:{$geometry:\"point\"},draw:{points:{collide:!1,\norder:200,color:\"#92CF48\",size:[[10,\"8px\"],[14,\"12px\"],[18,\"16px\"]]}}},polygons:{filter:{$geometry:\"polygon\"},draw:{polygons:{order:201,color:\"#E39E3C\"},lines:{order:202,color:\"#755DA5\",width:\"1px\"}}},lines:{filter:{$geometry:\"line\"},draw:{lines:{order:203,color:\"#000000\",width:\"2px\",join:\"round\",cap:\"round\"}}}}}}):new H.map.render.harp.Style({styles:[{layer:this.b,when:[\"==\",[\"geometry-type\"],\"Point\"],technique:\"circles\",renderOrder:200,color:\"#92CF48\",size:[\"interpolate\",[\"linear\"],[\"zoom\"],10,\n8,14,12,18,16]},{layer:this.b,when:[\"==\",[\"geometry-type\"],\"Polygon\"],technique:\"fill\",color:\"#E39E3C\",renderOrder:201},{layer:this.b,when:[\"==\",[\"geometry-type\"],\"Polygon\"],technique:\"solid-line\",color:\"#755DA5\",lineWidth:\"1px\",renderOrder:202},{layer:this.b,when:[\"==\",[\"geometry-type\"],\"LineString\"],technique:\"solid-line\",color:\"#000000\",lineWidth:\"2px\",renderOrder:203}]}))}u(ks,S);t(\"H.service.xyz.Provider\",ks);ks.prototype.G=function(a,b,c,d,e){return this.u.yf(a,b,c,this.b,d,e,this.i)};\nks.prototype.requestInternal=ks.prototype.G;ks.prototype.ba=function(){return this.u.ba(this.b)};ks.prototype.getCopyrights=ks.prototype.ba;ks.prototype.md=gf;ks.prototype.providesOMV=ks.prototype.md;ks.prototype.ea=function(){return this.gb()};ks.prototype.getStyle=ks.prototype.ea;ks.prototype.cc=function(a){C(a,qi)&&a.b(\"MVT\");this.Pb(a)};ks.prototype.setStyle=ks.prototype.cc;t(\"H.service.buildInfo\",function(){return If(\"H-service\",\"1.36.0\",\"29236d0\",{region:\"row\"})});\n");